// Copyright 2013 Google Inc. All Rights Reserved.
function ImaAds(e,n,a,i,t,o,d,r,s,l){switch(this.ima_config={ads_width:e,ads_height:n,game_id:a,descURL:i,is_fallback:t,ad_unit:o,content_id_key:d,content_id_value:r,impression_metadata:s,viewport_x_targeting:l},this.ima_config.ad_unit){case"Kizi_Preroll":case"Kizi_html5_Preroll":case"AFG_Midroll_HTML5_Games":case"AFG_Midroll":this.wrapperContainer=document.getElementById("PreRollAd");break;default:this.wrapperContainer=document.getElementById("VideoPreRollAd")}this.videoContent=this.wrapperContainer.appendChild(document.createElement("video")),this.adsManager=null,this.adsLoader=null,this.adDisplayContainer=null,this.intervalTimer=null}ImaAds.prototype.createAdDisplayContainer=function(){this.adDisplayContainer=new google.ima.AdDisplayContainer(this.wrapperContainer)},ImaAds.prototype.requestAds=function(){var n=this;this.createAdDisplayContainer(),this.adDisplayContainer.initialize(),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(e){n.onAdsManagerLoaded(e,n)},!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){n.onAdError(e,n)},!1);var e=new google.ima.AdsRequest;encodeURIComponent(window.location.href);e.adTagUrl="https://pub.tunnl.com/opp?tid=T-17112073216&player_width=640&player_height=480&page_url="+window.location.href+"&ch="+original_channel+"&ch_date="+ch_date_value,"undefined"!=typeof adgroup_key&&0<adgroup_key.length&&"undefined"!=typeof adgroup_value&&0<adgroup_value.length&&(e.adTagUrl=e.adTagUrl+"%26"+adgroup_key+"%3D"+adgroup_value),e.adTagUrl=e.adTagUrl+"%26Game_id%3D"+this.ima_config.game_id+"%26ch_date%3D"+ch_date_value+"%26AFG_Meta%3D"+this.ima_config.impression_metadata+"%26Viewport_X%3D"+this.ima_config.viewport_x_targeting+"&correlator="+Math.random(),e.linearAdSlotWidth=this.ima_config.ads_width,e.linearAdSlotHeight=this.ima_config.ads_height,e.nonLinearAdSlotWidth=this.ima_config.ads_width,e.nonLinearAdSlotHeight=this.ima_config.ads_height,this.adsLoader.requestAds(e)},ImaAds.prototype.onAdsManagerLoaded=function(e,n){var a=new google.ima.AdsRenderingSettings;a.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.adsManager=e.getAdsManager(n.videoContent,a),n.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){n.onAdError(e,n)}),n.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(e){n.onContentPauseRequested(e,n)}),n.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(e){n.onContentResumeRequested(e,n)}),n.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(e){n.onAdEvent(e,n)}),n.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,function(e){n.onAdEvent(e,n)}),n.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,function(e){n.onAdEvent(e,n)}),n.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,function(e){n.onAdEvent(e,n)}),n.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,function(e){n.onAdEvent(e,n)});try{n.adsManager.init(n.ima_config.ads_width,n.ima_config.ads_height,google.ima.ViewMode.FULLSCREEN),n.adsManager.start()}catch(i){console.log(i),n.ima_config.ad_unit.includes("Midroll")?hideMidRoll(n.ima_config.ad_unit):hidePreRoll(n.ima_config.ad_unit)}},ImaAds.prototype.onAdEvent=function(e,n){var a=e.getAd();switch(e.type){case google.ima.AdEvent.Type.LOADED:a.isLinear()||(n.ima_config.ad_unit.includes("Midroll")?hideMidRoll(n.ima_config.ad_unit):hidePreRoll(n.ima_config.ad_unit));break;case google.ima.AdEvent.Type.STARTED:a.isLinear()&&(n.intervalTimer=setInterval(function(){n.adsManager.getRemainingTime()},300));break;case google.ima.AdEvent.Type.COMPLETE:a.isLinear()&&clearInterval(n.intervalTimer);break;case google.ima.AdEvent.Type.CLICK:}},ImaAds.prototype.onAdError=function(e,n){console.log(e.getError()),n.ima_config.ad_unit.includes("Midroll")?hideMidRoll(n.ima_config.ad_unit):hidePreRoll(n.ima_config.ad_unit),null!=n.adsManager&&n.adsManager.destroy()},ImaAds.prototype.onContentPauseRequested=function(){},ImaAds.prototype.onContentResumeRequested=function(e,n){n.ima_config.ad_unit.includes("Midroll")?(void 0!==n?console.log("onContentResumeRequested hideMidRoll "+n.ima_config.ad_unit):console.log("onContentResumeRequested hideMidRoll _this undefined"),hideMidRoll(n.ima_config.ad_unit)):(void 0!==n?console.log("onContentResumeRequested hidePreRoll "+n.ima_config.ad_unit):console.log("onContentResumeRequested hidePreRoll _this undefined"),hidePreRoll(n.ima_config.ad_unit))};