function build_metadata_custom_targeting(e,t){var i="game";if(window.page_type)switch(window.page_type){case"game":i=0<$("div#video_on_gamepage").length?"gamewithvideo":"game";break;case"profile":i="user";break;case"video":i="video"}var n=read_and_increment_impressions_cookie(e);return("true"==is_paid_visit?"paid":"organic")+"_"+i+"_"+(window.child_directed!=undefined&&"true"==window.child_directed)+"_"+n+"_"+(1==t)}function read_and_increment_impressions_cookie(e){var t;return(t=parseInt(readCookie(e+"_imp")))||(t=0),createCookie(e+"_imp",t=Math.min(t+1,10)),t}function hide_flash_elements(){$.browser.msie?$.each($(".swfs_container"),function(e,t){$(t).css({position:"absolute",left:"-2000px",top:"-2000px"})}):($("object, embed, .swfs_container").css({visibility:"hidden"}),setTimeout(function(){$("#cboxContent object,embed").css({visibility:"inherit"})},100))}function show_flash_elements(){$.browser.msie?$.each($(".swfs_container"),function(e,t){$(t).css({position:"relative",left:"0",top:"0"})}):$("object, embed, .swfs_container").css({visibility:"inherit"})}function handleClick(){createCookie("click_data",$(this).attr("rel")),window.scrollHp&&window.scrollHp.submitImpressions&&scrollHp.submitImpressions()}function createExitPopup(e,t){function i(){return"exit_popup_message_"+(Math.floor(4*Math.random())+1)}function n(e){return"false"==e?"user_signed":"user_unsigned"}var o=$("<div>");o.appendTo($("body"));var r=_.template($("#exit_popup_template").html());return o.html(r({games_list:e,number_of_users:i(),background:n(t)})),o.hide(),$(".exit_popup_play_item").on("click",function(e){ga("send",{hitType:"event",eventCategory:"Exit Popup",eventAction:"Game clicked",eventLabel:e.currentTarget.href})}),$("#exit_popup_signup").on("click",function(e){ga("send",{hitType:"event",eventCategory:"Exit Popup",eventAction:"Signup clicked",eventLabel:e.currentTarget.href}),hideExitPopup(o),open_join_kizi_popup()}),$("#exit_popup_close, #exit_popup_background, #exit_popup_logo").on("click",function(){hideExitPopup(o)}),o}function showExitPopup(e,o,t){return!(0<t.clientY)&&(void 0!==o&&(("homepage"!=o||!readCookie("exit_popup"))&&(readCookie("exit_popup")||createCookie("exit_popup",1),!readCookie("exit_popup_gamepage")&&(!("game"==o&&diffMinutes(page_load_timestamp)<10)&&("game"==o&&10<=diffMinutes(page_load_timestamp)&&createCookie("exit_popup_gamepage"),ga("send",{hitType:"event",eventCategory:"Exit Popup",eventAction:"Shown on "+o+" page",eventLabel:document.location.href}),$(".exit_popup_play_item").each(function(e,t){var i=$(t).attr("href").split("?"),n=getExitParam(o);1<i.length?$(t).attr("href",$(t).attr("href")+n):$(t).attr("href",$(t).attr("href")+"?"+n)}),void e.show())))))}function hideExitPopup(e){e.hide()}function getExitParam(e){return"game"==e?"ref=exit_gamepage":"ref=exit"}function diffMinutes(e){var t=+new Date-e;return Math.round(t/6e4)}function calculateMaxSize(e,t){var i=t.width,n=t.height,o=e.width,r=e.height;if(n<=i){var a=n*o/i;a<=r?r=a:o=i*r/n}else tmpx=i*r/n,tmpx<=o?o=tmpx:r=n*o/i;return{width:o,height:r}}function collectUserGameState(i){var n={};return _.each($.jStorage.index(),function(e){var t=e.split("_");t[t.length-1]==i&&"game"==t[0]&&(n[e]=$.jStorage.get(e))}),n}function collectUserScores(e){return JSON.parse($.jStorage.get("scores_"+e))}function syncUserData(e){if(null==$.jStorage.get(e+"_sync")){var t=e+"_sync_status",i=e+"_sync_time",n=$.jStorage.get(t),o=$.jStorage.get(i);if("false"!=$.jStorage.get(t)&&"true"!=$.jStorage.get(t)){var r=collectUserGameState(e),a=collectUserScores(e);0<_.size(r)&&(null==n&&$.jStorage.set(t,0),$.jStorage.get(t)<3&&(null==o||o<Date.now()-9e5)?($.jStorage.set(i,Date.now()),$.jStorage.set(t,$.jStorage.get(t)+1),$.post("/users/sync_user_data",{gamestates:collectUserGameState(e),scores:a},function(e){"ok"==e.res&&($.jStorage.set(t,"true"),e.scores[game_permalink]&&"undefined"!=typeof FriendScroller&&FriendScroller.update_my_score(e.scores[game_permalink]))})):3<=$.jStorage.get(t)&&$.jStorage.set(t,"false"))}}}function funtomicTools_ReportEvent(e){var t=$("<div/>").css({position:"absolute",top:"-100000px"}),i=$("<form/>",{method:"post",action:"http://tools.funtomic.com/eventlogger/v1/events",target:"responseframe"});i.append($("<input/>",{type:"hidden",name:"domain",value:"kizi"})),i.append($("<input/>",{type:"hidden",name:"event_type",value:e})),t.append(i);var n=$("<iframe/>",{name:"responseframe",id:"responseframe",width:1,height:1}).on("load",function(){setTimeout(function(){i.remove(),n.remove()},500)});t.append(n),$("body").prepend(t),i.submit()}function detectUnityWebPlayer(){var e=!1;return-1!=navigator.appVersion.indexOf("MSIE")&&-1!=navigator.appVersion.toLowerCase().indexOf("win")?e=detectUnityWebPlayerActiveX():navigator.mimeTypes&&navigator.mimeTypes["application/vnd.unity"]&&navigator.mimeTypes["application/vnd.unity"].enabledPlugin&&navigator.plugins&&navigator.plugins["Unity Player"]&&(e=!0),e}function track_banner_impressions(){var t=0,e=((new Date).getTime()-page_load_timestamp)/1e3;adblock_active?$("#game_header .house_ads").each(function(){t+=1}):$("div[ id *= 'div-gpt' ]").each(function(){$(this).find("iframe").each(function(){try{0<$(this).contents().find("body").html().length&&(t+=1)}catch(e){}})}),$.post(track_ad_impressions,{time_on_page:e,adblock_active:adblock_active,ads_layout:ads_layout,single_skyscraper_mode:single_skyscraper_mode,game_id:game_id,channel:preroll_channel,actual_banner_impressions:t,banner_impressions:banner_impressions,google_actual_banner_impressions:google_actual_banner_impressions,google_banner_impressions:google_banner_impressions,stat_groups_ids:stat_groups_ids,window_focused:window_focused,page_id:page_id,page_type:page_type,isUnloading:isUnloading})}function count_actual_banners(){$("div[ data-banner-name *= 'kizi_' ]").each(function(){var t=$(this).attr("data-banner-name");$(this).find("iframe").each(function(){try{0<$(this).contents().find("body").html().length&&(actual_banners_arr[t]=1)}catch(e){}})})}function track_ad_clicks(){$("div[ data-banner-name *= 'kizi_' ]").mouseover(function(){isOverGoogleAd=!0,banner_clicked=$(this).attr("data-banner-name")}).mouseout(function(){isOverGoogleAd=!1}),$(window).blur(function(){isOverGoogleAd&&report_click(banner_clicked,"AFC",!(isOverGoogleAd=!1))})}function report_click(e,t,i){if(!is_in_eu){t=t===undefined?"":google_ads_types[t]||"",i===undefined&&(i=!0);var n=((new Date).getTime()-page_load_timestamp)/1e3;$.ajax({url:track_ad_click,type:"POST",data:{play_time_sec:n,game_id:game_id,banner:e,channel:preroll_channel,adgroup_key:adgroup_key,adgroup_value:adgroup_value,stat_groups_ids:stat_groups_ids,page_id:page_id,page_type:page_type,conversion_type:t,adblock_active:adblock_active}}),!adblock_active&&i&&(GA_events.track("Ads","Click",e,Math.round(n/60),{dimension23:game_id}),$("body").append('<img height="1" width="1" style="border-style:none;position:absolute" alt="" src="//www.googleadservices.com/pagead/conversion/979630809/?value='+conversion_value+'&amp;label=20sSCM-HgAgQ2fWP0wM&amp;guid=ON&amp;script=0"/>'),$("body").append('<img height="1" width="1" style="border-style:none;position:absolute" alt="" src="//www.googleadservices.com/pagead/conversion/882084325/?value='+conversion_value+'&amp;label=bJuMCJj15G4Q5ZPOpAM&amp;guid=ON&amp;script=0"/>'),$("body").append('<img height="1" width="1" style="border-style:none;position:absolute" alt="" src="//www.googleadservices.com/pagead/conversion/872594077/?value='+conversion_value+'&amp;label=Tm8XCM-AsmoQnfWKoAM&amp;guid=ON&amp;script=0"/>'),$("body").append('<img height="1" width="1" style="border-style:none;position:absolute" alt="" src="//www.googleadservices.com/pagead/conversion/851080648/?value='+conversion_value+'&amp;label=JLepCNDgvXEQyOvplQM&amp;guid=ON&amp;script=0"/>'),$("body").append('<img height="1" width="1" style="border-style:none;position:absolute" alt="" src="//www.googleadservices.com/pagead/conversion/819932459/?value='+conversion_value+'&amp;label=IzqiCKjYq4EBEKva_IYD&amp;guid=ON&amp;script=0"/>'))}}function track_ad_error(e){var t=((new Date).getTime()-page_load_timestamp)/1e3;$.ajax({url:"/track_ad_error",type:"POST",data:{play_time_sec:t,game_id:game_id,banner:e,channel:preroll_channel,stat_groups_ids:stat_groups_ids,page_id:page_id,page_type:page_type}})}function report_skip(e){var t=((new Date).getTime()-page_load_timestamp)/1e3;ga("send","event","Ads","Skip",e,Math.round(t/60))}function track_preroll_impression(e,t,i,n){var o=((new Date).getTime()-page_load_timestamp)/1e3;o=Math.min(o,14400),o=Math.round(Math.max(o,0)),GA_events.track("Ads","PrerollImpression",game_id,o,{dimension23:game_id,dimension26:n,dimension27:t,dimension28:i,dimension29:e})}function supportsSVG(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}function resize_block(e,i){i=i||[];var t=12,n=e.attr("id"),o=parseInt(e.css("font-size")),r=e.parent(),a=r.width()-12;for(r.children().each(function(e,t){n!=undefined&&n!=$(t).attr("id")&&i.indexOf($(t).attr("class"))<0&&(a-=parseInt($(t).outerWidth(!0)))});a<e.width()&&t<o;)o-=1,e.css("font-size",o);e.css("width",a),e.css("overflow","hidden")}function calc_viewport_x_custom_criteria(){var e=null,t=$(window).width();return 1259<t&&t<1266?e="1260":1343<t&&t<1351?e="1350":1419<t&&t<1425?e="1420":1899<t&&t<1920&&(e="1900"),e}function is_on_screen(e){var t=$(window).scrollTop()+$(window).height();return e.offset().top<=t}function flash_supported(){return swfobject.hasFlashPlayerVersion("1")}function set_cookies_consent_container(){var e=null,t=$("#collections_wrapper ul"),i="";if(window.page_type)switch(window.page_type){case"game":e=$("#game_header_container");break;case"video":e=$("#video_header_container");break;default:0<t.length?(e=$("#charachters_bg")!=undefined&&0<$("#charachters_bg").length?$("#charachters_bg"):$("#selected_category_div_wrapper"),i="top:0px;"):e=$("#header_container")}if(e){var n=jQuery("<div/>",{id:"cookies_consent_container",style:"display: none; "+i}),o=jQuery("<span/>",{id:"cookies_consent_main_text",text:"This site uses cookies. By continuing to use our website you are agreeing"}),r=jQuery("<a/>",{id:"cookies_consent_link",text:"to our use of cookies.",href:privacy_path,target:"blank"}),a=jQuery("<div/>",{id:"cookies_consent_close_bttn",text:"x"});n.append(o),n.append(a),n.append(r),0<t.length?e.before(n):e.after(n),$("#cookies_consent_container").slideDown("slow",function(){}),$("#cookies_consent_close_bttn").click(function(){$("#cookies_consent_container").slideUp("slow",function(){}),$.jStorage.set("cookie_aware_client","true")}),$("#cookies_consent_link").click(function(){$.jStorage.set("cookie_aware_client","true")})}}function print_tests(){console.log("abtest1Alt: '"+abtest1Alt+"' abtest2Alt: '"+abtest2Alt+"' abtest3Alt: '"+abtest3Alt+"' abtest4Alt: '"+abtest4Alt+"' abtest5Alt: '"+abtest5Alt+"'")}function install_kizi_chrome_extension(e){var t=flash_supported();chrome.webstore.install("//chrome.google.com/webstore/detail/pmmbokildidpgafchfmebmhpoeiganhj",function(){$("#install-button").hide(),"function"==typeof e&&e(),t||window.open(window.location)})}function install_kizi_mini_chrome_extension(e){chrome.webstore.install("//chrome.google.com/webstore/detail/bolcikgngmpkpdhgnppchlmcknijipml",function(){"function"==typeof e&&e()})}function assure_html5_cookie_status(e,t){flash_supported()?"1"==readCookie("html5")&&(eraseCookie("html5"),e&&location.reload()):"after_first_page"==t&&createCookie("html5","1")}function is_chrome_bug_scenario(){return!flash_supported()&&is_extension_installed()}function is_extension_installed(){return 0<$("#kizi-extension-installed").length}function animate_counter(e,n){n=void 0===n?"":n;var o=Math.max(e,last_counter_value)-Math.min(e,last_counter_value);$(n+".coins_counter").stop(!0),$(n+".coins_counter").animate({counter:e},{duration:1200,step:function(e){var t=Math.max(last_counter_value,e),i=Math.min(last_counter_value,e);Math.round(10*(1-(t-i)/o));$.browser.msie||$(n+".coins_counter .counter_cell").addClass("blur"),update_coins_counter(parseInt(e),n)},complete:function(){$.browser.msie||$(n+".coins_counter .counter_cell").removeClass("blur"),last_counter_value=e}})}function animate_xp_bar(e){$("#exp_bar_fill").animate({counter:e},{duration:1200,step:function(e){$("#exp_bar_fill").css({width:e+"%"})}})}function update_coins_counter(e,t){$(t+".coins_counter .counter_cell").each(function(e,t){$(t).html("0")});var i=(e+"").split("").reverse();$(t+".coins_counter").each(function(){var e=$(this);$.each($.makeArray(e.find(".counter_cell")).reverse(),function(e,t){$(t).html(i[e])})})}function collect_client_info(){client_info={},client_info.viewport_x=$(window).width(),client_info.viewport_y=$(window).height();try{navigator.plugins instanceof PluginArray&&0!=navigator.plugins.length?delete client_info.phantom:client_info.phantom=!0}catch(e){}createJSONCookie("ci",client_info)}function createCookie(e,t,i){var n="";if(i){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3),n="; expires="+o.toGMTString()}document.cookie=e+"="+escape(t)+n+"; path=/"}function createJSONCookie(e,t){createCookie(e,JSON.stringify(t))}function readCookie(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return unescape(o.substring(t.length,o.length))}return null}function readJSONCookie(e){return JSON.parse(readCookie(e))}function eraseCookie(e){createCookie(e,"",-1)}function GamesList(u,c){c=c||{};var h,_="GamesList_"+Math.round(1e5*Math.random()),p=($("#"+u),u=u,!1),f=!1,m=this,e=function(){(h=$("<div/>",{id:_}).addClass("new_games_list").addClass("list_under_"+u).css({display:"none"}).appendTo("body")).mouseenter(function(){f=!0}),h.mouseleave(function(){f=!1}),$(document.body).click(function(){p&&!f&&m.hide()}),$(document.body).keyup(function(e){!p||9!=e.which&&27!=e.which||m.hide()}),$("#search_div").click(function(){ga("send","event","Search field clicked")})};this.render_list_items=function(r,a,e,s,l){var d=0;return $.each(e,function(e,t){if(r[t]){var i=r[t][0],n="",o="";d++,a?(l.push("<li "+n+" game_id='"+t+"' is_video='true'>"),l.push('<div style="background:'+(r[t][5]||"#000000")+'" class="video_thumb link_thumb">'),l.push('<img class="thumb" '+o+' src="'+r[t][2]+'" alt="'+i+'" />')):parseInt(t)<0?(l.push("<li "+n+" game_id='"+t+"' is_video='false' is_tag='true'>"),l.push('<div class="tag_thumb link_thumb"><img src="'+r[t][3]+'" /><img src="'+r[t][4]+'" /><img src="'+r[t][5]+'" /><img src="'+r[t][6]+'" />')):(l.push("<li "+n+" game_id='"+t+"' is_video='false'>"),l.push('<div class="link_thumb">'),l.push('<img class="thumb" '+o+' src="'+r[t][2]+'" alt="'+i+'" />')),a||(1==r[t][3]&&l.push("<img src='https://cdn8.kizi.com/assets/collections/coins_new-57fd8099557e00ffbf32832eedfed910.png' style='position:absolute;z-index:4;bottom:5px;right:5px;width:20px;height:20px;' />"),1==r[t][6]&&l.push("<img src='https://cdn8.kizi.com/assets/common/multiplayer-978206bf4a9520467fe7dde6aef62124.png' style='position:absolute;z-index:4;bottom:5px;left:5px;width:20px;height:20px;' />")),1==r[t][4]&&l.push("<img src='https://cdn8.kizi.com/assets/common/new_ribbon_new_img-69cacfca2a3c970477aa01146098ee1b.png' style='position:absolute;z-index:5;top:1px;left:1px;width:50px;height:50px;' />"),l.push("</div>"),s&&(i=i.replace(new RegExp("("+s+")","gi"),"<b class='bold_phrase'>$1</b>")),parseInt(t)<0&&(i="<div class='tag_name_wrapper clearfix'><div class='tag_img fl'></div><p>Tag: "+i+" Games ("+r[t][2]+")</p></div>"),l.push("<span>"+i+"</span>"),l.push("</li>")}}),d},this.show=function(e,t,i){if(c.show_is_in_toggle_mode&&p&&!f)m.hide();else{var n=[];c.add_titles&&(0<e.length||0<t.length)&&h.css({paddingTop:"4px"}),0<e.length&&c.add_titles&&n.push("<div class='clearfix title_wrapper'><div class='games_title'></div><div>Games</div></div>"),n.push("<ul class='clearfix'>");var o=0;if(o+=this.render_list_items(games_hash,!1,e,i,n),n.push("</ul>"),0<t.length&&0<e.length&&n.push("<hr/>"),0<t.length&&c.add_titles&&n.push("<div class='clearfix title_wrapper'><div class='videos_title'></div><div>Videos</div></div>"),n.push("<ul class='clearfix'>"),o+=this.render_list_items(videos_hash,!0,t,i,n),n.push("</ul>"),h.find("ul").remove(),h.find(".videos_title").remove(),h.find(".games_title").remove(),h.find(".title_wrapper").remove(),h.find("hr").remove(),h.append(n.join("")),h.find("li").mouseover(function(){c.onSelect&&c.onSelect(),$(this).addClass("selected")}),h.find("li").mouseout(function(){$(this).removeClass("selected")}),h.find("li").click(function(){$(this).closest("div").hasClass("list_under_search")&&createCookie("internal_search_play",$(this).attr("game_id")),"true"==$(this).attr("is_tag")?redirect(games_hash[$(this).attr("game_id")][1]+"?ref=search"):"false"==$(this).attr("is_video")?(createCookie("last_played_click","true"),"5301"==$(this).attr("game_id")||"money-movers-maker"==games_hash[$(this).attr("game_id")][1]?redirect(games_hash[$(this).attr("game_id")][1]+"?ref=search"):redirect(games_hash[$(this).attr("game_id")][1])):readCookie("show_tv")&&location.pathname.startsWith("/tv")?redirect("/tv/videos/"+videos_hash[$(this).attr("game_id")][1]):($(this).closest("div").hasClass("list_under_last_played_icon")&&createCookie("recent_videos_play",$(this).attr("game_id")),$(this).closest("div").hasClass("list_under_last_played_icon")&&ga("send",{hitType:"event",eventCategory:"Click",eventAction:"Similar videos tile",eventLabel:document.location.href}),redirect("/videos/"+videos_hash[$(this).attr("game_id")][1]))}),0==o){$("<li/>",{style:"line-height: 45px;text-align: center;cursor: auto;"}).click(m.hide).html("No games found").appendTo("#"+_+" ul:first");$("input#search").val(),window.location.pathname}var r=$("#"+u);if(c.fixed&&h.css({position:"fixed"}),c.open_above){var a=5+$(window).height()-(r.offset().top-$(window).scrollTop());h.css({bottom:a+"px"})}else{var s=r.offset().top-$(window).scrollTop()+r.height()+8;h.css({top:s+"px"})}var l=$(r).offset().left+r.width()/2,d=Math.min(l-h.width()/2,$(window).width()-h.width()-20);h.css({left:d+"px"}),h.fadeIn("fast"),setTimeout(function(){p=!0},50)}},this.hide=function(){h.hide(),f=p=!1,h.css("height",""),c.onClose&&c.onClose()},this.count=function(){return h.find("li").length},this.highlight=function(e){this.clearHightlight(),h.find("li").eq(e).addClass("selected")},this.click=function(e){h.find("li").eq(e).click()},this.clearHightlight=function(){h.find("li").each(function(){$(this).removeClass("selected")})},e()}function notifyGameCoinsAwarded(){refresh_user_info_box()}function searchFocus(e){$.trim(e.value)==$(e).attr("org_value")&&(e.value="")}function searchBlur(e){""==$.trim(e.value)&&(e.value=$(e).attr("org_value"))}function autocomplete(e,t){function a(e){var i=[];return $.each(e.split(" "),function(e,t){i.push(n(t))}),i.join(" ")}function n(e){if(!(e=(e+"").toUpperCase()))return"";for(var t,i,n,o=[0,0,0,0],r={B:1,F:1,P:1,V:1,C:2,G:2,J:2,K:2,Q:2,S:2,X:2,Z:2,D:3,T:3,L:4,M:5,N:5,R:6},a=0,s=0;(i=e.charAt(a++))&&s<4;)(t=r[i])?t!==n&&(o[s++]=n=t):(s+=1===a,n=0);return o[0]=e.charAt(0),o.join("")}function s(e,t){e=e.toLowerCase().split(" "),t=t.toLowerCase().split(" ");var n=[];return $.each(e,function(e,i){$.each(t,function(e,t){n.push(o(i,t))})}),n.sort()[0]}function o(e,t){if(e==t)return 0;var i=e.length,n=t.length;if(0===i)return n;if(0===n)return i;var o=!1;try{o=!"0"[0]}catch(f){o=!0}o&&(e=e.split(""),t=t.split(""));var r=new Array(i+1),a=new Array(i+1),s=0,l=0,d=0;for(s=0;s<i+1;s++)r[s]=s;var u="";for(l=1;l<=n;l++){for(u=t[(a[0]=l)-1],s=0;s<i;s++){d=e[s]==u?0:1;var c=r[s+1]+1,h=a[s]+1,_=r[s]+d;h<c&&(c=h),_<c&&(c=_),a[s+1]=c}var p=r;r=a,a=p}return r[i]}var i=$("#"+e),r=this,l=-1,d=1==t,u=6,c=d?8:12,h={add_titles:d,onSelect:function(){r.clearHightlight()}};"game"!=window.page_type&&"video"!=window.page_type&&(h.fixed=!0,"sidebar_user_info_box"==window.page_type&&(h.open_above="true"));var _=new GamesList(e,h),p=function(i,n,e){var o=[];$.each(i,function(e,t){if(e<0&&n.length<3)return!0;-1<t[0].toLowerCase().indexOf(n.toLowerCase())&&o.push(parseInt(e))}),(o=o.sort().slice(0,e)).length<e&&($.each(i,function(e,t){-1<a(t[0].toLowerCase()).indexOf(a(n.toLowerCase()))&&-1==o.indexOf(parseInt(e))&&o.push(parseInt(e))}),o=o.slice(0,e));var r=[];return $.each(o,function(e,t){r.push([t,s(i[t][0],n)])}),r=r.sort(function(e,t){return e[1]-t[1]}),r=$.map(r,function(e){return e[0]})},f=function(e){if(window.games_hash&&e){var t=p(window.games_hash,e,c),i=u,n=d?p(window.videos_hash,e,i):[];_.show(t,n,e)}else _.hide()},m=function(){i.keyup(function(e){13==e.which?(-1!=l&&_.click(l),_.hide()):38==e.which?(-1<l&&l--,-1==l?_.clearHightlight():_.highlight(l)):40==e.which?(l<_.count()-1&&l++,_.highlight(l)):(r.clearHightlight(),f($(this).val()))})};this.clearHightlight=function(){l=-1,_.clearHightlight()},m()}function change_language(e){createCookie("change_lang",e),location.reload()}function getScrollBarWidth(e){var t,i=document.createElement("p");i.style.width="100%",i.style.height="200px";var n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.appendChild(i),document.body.appendChild(n);var o=i.offsetWidth;n.style.overflow="scroll";var r=i.offsetWidth;return o==r&&(r=n.clientWidth),document.body.removeChild(n),(t=o-r)<1&&(t=e),t}function detect_browser(){var e,t=navigator.appName,i=navigator.userAgent,n=i.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return n&&null!=(e=i.match(/version\/([\.\d]+)/i))&&(n[2]=e[1]),n=n?[n[1],n[2]]:[t,navigator.appVersion,"-?"]}function logout_and_go_back(){location.href="/users/logout_and_go_back?back_to="+location.pathname}function open_facebook_login(){var e=640,t=480,i=screen.width/2-e/2,n=screen.height/2-t/2,o="/oauth/facebook";null==facebook_window||facebook_window.closed&&!fbUserLoggedIn?facebook_window=window.open(o,"facebook_connect","menubar=no,toolbar=no,status=no,scrollbars=yes,width="+e+",height="+t+",top="+n+",left="+i):facebook_window.focus()}function refreshUserData(){if($("#GameEmbedSWF").present())if("function"==typeof $("#GameEmbedSWF")[0].refreshUserData)try{$("#GameEmbedSWF")[0].refreshUserData()}catch(e){window.console&&window.console.error&&console.error("failed to call refreshUserData on the game object. Message: "+e)}else refresh_user_info_box();if($("#user_info_box_container").present()||"video"==window.page_type||"tv"==window.page_type)try{refresh_user_info_box()}catch(e){window.console&&window.console.error&&console.error("failed to call refreshUserData on the user info box. Message: "+e)}}function trackUserSignup(e,t){t=t||"",window.image3=new Image(1,1),image3.src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1062041628/?value=0&amp;label=KIAqCMzYqQQQnPC1-gM&amp;guid=ON&amp;script=0",window.image4=new Image(1,1),image4.src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1062041628/?value=0&amp;label=OaaRCNTXqQQQnPC1-gM&amp;guid=ON&amp;script=0",ga("send","event","Register",e?"FB":"Manual")}function handleUserSwitch(e,t){if(fbUserLoggedIn=t,"game"==window.page_type){try{$("#GameEmbedSWF")[0].userLoggedIn(e)}catch(i){}refresh_user_info_box(),window.is_coins_game&&load_friends_box()}else"user_info_box"!=window.page_type&&"sidebar_user_info_box"!=window.page_type&&"video"!=window.page_type||refresh_user_info_box()}function goBackToAvatarCreatorIfNeeded(){window.goBackToAvatarCreator&&(window.goBackToAvatarCreator=!1,open_avatar_editor())}function open_avatar_editor(e){flash_supported()&&$.colorbox({iframe:!0,href:"/games/avatar-creator?iframe=true&gender="+e,width:856,height:650,fixed:!0,overlayClose:!1,escKey:!1,onLoad:function(){$("#cboxClose").show()}})}function avatar_image_updated(e,t){e&&($("#user_image").attr("src",e),$("div.friend_box[data-id="+user_id+"] .friend_thumb img").attr("src",e)),t&&(window.parent.$("#fullbody_user_image").attr("src",t),window.parent.refresh_avatar,window.parent.refresh_avatar())}function openAvatarFacebookShare(e){var t={method:"feed",redirect_uri:"//kizi.com/close_popup.html",link:"//kizi.com",display:"popup",picture:e,name:"Check out my awesome new Kizi!",description:"Come play on kizi.com and create your own Kizi for free!"};FB.ui(t)}function openAddFriendsBox(){open_friends_center("add_friends")}function show_defered_images(){$("img.deferred").each(function(){var e=$(this);e.attr("src",e.attr("defer_src")),e.removeClass("deferred")}),$("div.deferred").each(function(){var e=$(this);e.css("background-image","url('"+e.attr("defer_src")+"')"),e.removeClass("deferred")})}function getYoutubeVideoId(e){var t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/)([^?'&]+)(.*)/,i=e.match(t);return i&&11==i[2].length?i[2]:"error"}function getDailyMotionId(e){var t=/^.*(dailymotion\/|v\/|u\/\w\/|video\/)([^?'&]+)(.*)/,i=e.match(t);return i&&7==i[2].length?i[2]:"error"}function refresh_user_info_box(t){refresh_user_box_blocked||(refresh_user_box_blocked=!0,$.ajax("/users/refresh_user_box",{data:{page_type:window.page_type,game_id:window.game_id},type:"get",dataType:"script",success:function(){refresh_user_box_blocked=!1}}).done(function(){var e;void 0!==t&&(e=window.setInterval(function(){(0<$("#get_more_coins_html5_popup").length||0<$("#get_more_coins_popup").length||0<$("#daily_rewards_popup").length)&&(t(),window.clearInterval(e))},300))}))}function setup_duration_element(e,t){var i="0",n="0";void 0!==t&&(i="undefined"!=typeof t.bottom?t.bottom:"0",n="undefined"!=typeof t.right?t.right:"0");var o=double_digits(e%60),r=double_digits(Math.floor(e/60)%60),a=double_digits(Math.floor(e/3600));return"<div class='duration_element' style='bottom: "+i+"px; right: "+n+"px;'>"+((0<a?a+":":"")+r+":"+o)+"</div>"}function double_digits(e){return 9<e?""+e:"0"+e}function sendSplunkEvent(){}function save_video_duration(e,t){$.post("/save_video_duration",{video_id:e,video_duration:t})}function RateObject(e,t,i,n,o){this.saved_rating=i,this.thumbs_up=n||0,this.thumbs_down=o||0,this.rate_url="/videos/"+t+"/video_rate"}function redirect(e){if($.browser.msie){var t=document.createElement("a");t.href=e,document.body.appendChild(t),t.click()}else location.href=e}function show_pread_spinner(e,t){pread_spinner=new Spinner({lines:10,length:20,width:8,radius:15,color:"#bbb",speed:1,trail:60,className:"spinner",zIndex:2e9,left:e/2-45,top:t/2-45}).spin($("#PreRollAd").get(0))}function hide_pread_spinner(){pread_spinner.stop()}function hide_game_comment(){$(".game_comment").fadeOut()}function stopPreloading(){1==preloading_behavior&&$("#GameEmbed").css({display:"none"})}function get_next_video_link(e){var t=e,i={thumb:t.thumb,path:t.permalink,title:t.title};return console.log("DEBUG: next video ->",i),i}function show_img_texts(){$("#PreRollAdText").css({visibility:"visible"}),$("#advertisement_text_img").css({visibility:"visible"})}function remove_img_texts(){$("#PreRollAdText").remove(),$("#advertisement_text_img").remove()}function showMidRoll(){"none"!=ad_mode&&(null!=last_ingame_ad_timestamp&&(new Date).getTime()-last_ingame_ad_timestamp<6e4*MINUTES_BETWEEN_MIDROLLS||(adblock_active||$("#PreRollAd").replaceWith('<div id="PreRollAd" > <div id="PreRollDummy"></div> </div>').show(),show_dfp_preroll(ad_width||800,ad_height||600,game_id,descriptionURL,!1,"AFG_Midroll_HTML5_Games","Game_id","gamepage_game_id_"+game_id),0<$("#PreRollDummy").length&&"undefined"!=typeof $("#PreRollDummy")[0].startMidroll&&$("#PreRollDummy")[0].startMidroll(),last_ingame_ad_timestamp=(new Date).getTime()))}function hideMidRoll(){$("#PreRollAd").empty(),$("#PreRollAd").hide(),$("#GameEmbed").css({visibility:"visible",display:"block"});var e=((new Date).getTime()-page_load_timestamp)/1e3;static_mode||$.post(track_ad_impressions,{time_on_page:e,adblock_active:adblock_active,ads_layout:ads_layout,game_id:game_id,midroll_impressions:1,channel:preroll_channel,stat_groups_ids:stat_groups_ids,page_id:page_id,page_type:page_type})}function showPreRoll(){last_ingame_ad_timestamp=(new Date).getTime(),"none"==gAdSettings.ad_mode?hidePreRoll():show_dfp_preroll(gAdSettings.ad_width,gAdSettings.ad_height,game_id,descriptionURL,!1,"Kizi_Preroll","Game_id","gamepage_game_id_"+game_id)}function show_dfp_html5_preroll(){("AFV_Preroll"==gAdSettings.adUnitName&&($("#VideoEmbed").css("visibility","hidden"),"afv"),adblock_active)||(new ImaAds(gAdSettings.advert_width,gAdSettings.advert_height,gAdSettings.game_id,gAdSettings.descURL,gAdSettings.is_fallback,gAdSettings.adUnitName,gAdSettings.content_id_key,gAdSettings.content_id_value,gAdSettings.impression_metadata,gAdSettings.viewport_x_targeting).requestAds(),time_until_preroll=(new Date).getTime()-page_load_timestamp,preroll_impressions+=1)}function show_dfp_preroll(e,t,i,n,o,r,a,s){$("#AdapPreRollDummy").hide(),"Kizi_Preroll"==r&&(r="Kizi_html5_Preroll"),gAdSettings.game_id=i,gAdSettings.descURL=n,gAdSettings.is_fallback=o,gAdSettings.adUnitName=r,gAdSettings.content_id_key=a,gAdSettings.content_id_value=s,gAdSettings.impression_metadata=build_metadata_custom_targeting("afg",o),gAdSettings.viewport_x_targeting=calc_viewport_x_custom_criteria(),show_dfp_html5_preroll()}function closeVideoAdAndFallbackToDFP(){$("#PreRollAd").html('<div id="PreRollDummy"></div>'),show_dfp_preroll(ad_width,ad_height,game_id,descriptionURL,!0,"Kizi_Preroll","Game_id","gamepage_game_id_"+game_id)}function ovaPrintDebug(e){try{console.log("OVA PRINT DEBUG "+e)}catch(t){}}function onImpressionEvent(e){null!=e&&(ovaPrintDebug("onImpressionEvent "+e.eventType),0==preroll_impressions&&(preroll_impressions+=1,time_until_preroll=(new Date).getTime()-page_load_timestamp,track_preroll_impression("bright_roll","video",!1,"bright_roll_preroll"),clearTimeout(videoAdTimeout),videoAdTimeout=setTimeout(hidePreRoll,3e4)))}function onTrackingEvent(e){null!=e&&(ovaPrintDebug("onTrackingEvent "+e.eventType),"complete"==e.eventType&&(hidePreRoll(),clearTimeout(videoAdTimeout)))}function onClickTrackingEvent(e){null!=e&&(ovaPrintDebug("onClickTrackingEvent "+e.eventType),report_click("bright_roll_preroll","bright_roll",!0))}function spotxAdDone(e){clearTimeout(videoAdTimeout),e?(video_impressions=1,hidePreRoll()):null==time_until_afg_fallback&&(remove_img_texts(),time_until_afg_fallback=(new Date).getTime()-page_load_timestamp,show_dfp_preroll(ad_width,ad_height,game_id,descriptionURL,!0,"Kizi_Preroll","Game_id","gamepage_game_id_"+game_id))}function stopPreloading(){1==preloading_behavior&&$("#GameEmbed").css({display:"none"})}function hidePreRoll(e){switch(e=void 0===e?"Kizi_Preroll":e,console.log("adUnitName "+e),e){case"AFV_Preroll":var t="#VideoPreRollAd",i="#VideoEmbed",n="video";break;default:t="#PreRollAd",i="#GameEmbed",n="game"}var o,r;($(t).empty(),$(t).hide(),$(i).css({visibility:"visible",display:"block"}),"undefined"!=typeof game_embed_code&&"AFV_Preroll"!=e&&(setTimeout(function(){$(window).trigger("gameLoaded")},1e3),$("#GameEmbedDummy").html(game_embed_code)),"undefined"!=typeof game_dimensions&&game_dimensions.is_wider&&($("#GameEmbed").find("iframe").css({width:game_dimensions.width,height:game_dimensions.height}),$("#GameEmbed").find("#game_frame").css({width:game_dimensions.width,height:game_dimensions.height})),null!=time_until_preroll&&(time_until_game=(new Date).getTime()-page_load_timestamp),"AFV_Preroll"!=e&&"undefined"!=typeof original_game_height&&"undefined"!=typeof default_game_height&&"undefined"!=typeof game_swf_height&&"undefined"!=typeof game_swf_width)&&(o=original_game_height>default_game_height?0:Math.max(0,($("#"+n+"_box").height()-game_swf_height)/2),(r=($("#"+n+"_box").width()-game_swf_width)/2)<0&&(r=0),$(i).css({marginTop:o+"px",marginLeft:r+"px"}),$("#play_on_mobile").css({display:"",left:r+parseFloat($("#game_box").css("margin-left"))+"px"}));null==logo_animation_interval_id&&(logo_animation_interval_id=setInterval(function(){try{0<$("#PreloaderEmbedSWF").length?"undefined"!=typeof $("#PreloaderEmbedSWF")[0].playLogoAnimation&&($("#PreloaderEmbedSWF")[0].playLogoAnimation(),clearInterval(logo_animation_interval_id)):0<$("#GameEmbedSWF").length&&"undefined"!=typeof $("#GameEmbedSWF")[0].playLogoAnimation&&($("#GameEmbedSWF")[0].playLogoAnimation(),clearInterval(logo_animation_interval_id)),60<logo_animation_retries++&&clearInterval(logo_animation_interval_id)}catch(e){}},500)),static_mode||track_preroll_impressions(),"function"==typeof after_hide_preroll&&after_hide_preroll(e),setTimeout(hide_game_comment,6e3),preroll_is_done=!0}function hide_game_comment(){VD.startDurationCount(PlayerStats),$(".game_comment").fadeOut()}function track_preroll_impressions(){var e=((new Date
).getTime()-page_load_timestamp)/1e3;ad_tracked||(ad_tracked=!0,$.post(track_ad_impressions,{time_on_page:e,adblock_active:adblock_active,ads_layout:ads_layout,game_id:game_id,channel:preroll_channel,preroll_impressions:preroll_impressions,video_attempts:video_attempts,video_impressions:video_impressions,time_until_afg_fallback:time_until_afg_fallback,time_until_preroll:time_until_preroll,time_until_game:time_until_game,time_until_video_attempt:time_until_video_attempt,time_until_ad_loaded:time_until_ad_loaded,video_network:ad_mode,stat_groups_ids:stat_groups_ids,window_focused:window_focused,page_id:page_id,page_type:page_type}))}function show_pread_spinner(e,t){pread_spinner=new Spinner({lines:10,length:20,width:8,radius:15,color:"#bbb",speed:1,trail:60,className:"spinner",zIndex:2e9,left:e/2-45,top:t/2-45}).spin($("#PreRollAd").get(0))}function hide_pread_spinner(){pread_spinner.stop()}function show_interstitial_ad(){$.colorbox({width:"845px",height:"550px",iframe:!0,href:"/interstitial.html",opacity:1,overlayClose:!1,escKey:!1}),$("#cboxClose").hide(),setTimeout(function(){$("#cboxClose").show()},5e3),setTimeout(function(){$.colorbox.close(),hidePreRoll()},1e4)}function calculate_game_container(e,t){return calculateMaxSize({height:t,width:e},{height:original_game_height,width:original_game_width})}function render_tile_similar_games(o,e,r){var a=e||$("#similar_games_container"),s=o.games.length;return"string"==typeof a?a=$("#"+a):2==a.length&&(s=o.games.length/2-1),$.each(o.games,function(e,t){var i=a[0];if(s<e&&(i=a[1]),KiziUtils.unity_supported(t)&&KiziUtils.webgl_supported(t)){var n=jQuery.extend({},t);o.record_efficiency?n.record_click=!0:n.record_click=!1,n.rel=o.rel,n.page=o.page,n.thumb_dimension=o.thumb_height,r&&(n.optional_link_params=" target='_blank' "),new TileGameThumb({el:$("<div/>",{"class":window.wide_layout?"similar_tile_wrapper_wide":"similar_tile_wrapper"}).appendTo(i),game_hash:n})}}),a}function post_game_show_actions(e,t){var i={};collect_client_info(),1==t["static"]?i["static"]=!0:i.rand=Math.random(),i.similar_amount=t.similar_amount||5,i.similar=t.similar||!1,i.channel=preroll_channel,i.page_id=t.page_id,i.page_type=t.page_type,i.origin_category=t.origin_category,i.first_game_play_for_visit=t.first_game_play_for_visit,i.thumb_type=t.thumb_type,i.thumb_position=t.thumb_position,i.alt_cdn=t.alt_cdn,i.allow_unity=t.allow_unity;(new Date).getTime(),page_load_timestamp;$.getJSON(e,i,function(e){null!=e&&i.similar&&render_tile_similar_games(e,t.similar_container),static_mode||$.ajax(load_popups_path,{type:"get",dataType:"script",cache:"false"}).done(function(){games_json_load(function(){setTimeout(track_banner_impressions,1500)})})})}function load_friends_box(){$.ajax("/games/"+game_permalink+"/load_friends_box",{type:"get",dataType:"script",success:function(){}})}function isRightBarLoaded(){return!0}function isLeftBarLoaded(){return!0}function sendMessage(e,t,i){try{console.log(e,t,i)}catch(n){console.error(n)}"left"==e?"addCoins"==t?add_coins(i[0]):"updateCoins"==t?window.parent&&"function"==typeof window.parent.update_coins_in_sidebar?window.parent.update_coins_in_sidebar(i[0]):update_coins(i[0]):"updateXpProgression"==t?update_xp_progression(i[0]):"updateLevel"==t&&update_level(i[0]):"right"==e&&"receiveData"==t&&FriendScroller.update_my_score(i[0])}function position_floor(){var e=$(window).height();$(document).height()>e&&(e=$(document).height()),$.browser.msie&&7===parseInt($.browser.version,10)||$("#gamepage_bottom_circle").css({top:e-377+"px",height:"377px",width:"100%",position:"absolute",display:"block"})}function set_jstorage_object(e,t){return $.jStorage.set(e,t)}function get_jstorage_object(e){return $.jStorage.get(e)}function jstorage_available(){return $.jStorage.storageAvailable()}function getLogoUrl(){return"//cdn0.kizi.com/api/kiziLogo.swf?v=1"}function calculateGameFrameDimensions(e,t){var i=default_game_margin_width||25,n=$("#similar_games_container").width()||125,o=$(window).width()-n-i,r=e,a=t,s=!1;o<r&&(s=!0,a=t*((r=o)/e));return{width:+r,height:+a,is_wider:s}}function isGameSpecial(e){return-1!==["Moto X3M","My Dolphin Show 4"].indexOf(e)}function addStyle(e,t){var i=$(e);i.attr("style",i.attr("style")+"; "+t)}function setFullScreen(){addStyle("#PreloaderEmbedSWF","margin-left: 165px !important"),addStyle("#GameEmbedSWF","margin-left: 165px !important"),$(".gameplayer").removeAttr("style"),$("#game_frame").addClass("code_monkey_fs"),$("#PreRollAd").addClass("game_fullscreen").addClass("ad_fullscreen"),$("#PreloaderEmbedSWF").addClass("game_fullscreen").addClass("code_monkey_fs").css({"z-index":10,position:"relative"}),"true"==game_embed_code_present?($("#GameEmbedDummy").find("iframe").addClass("game_fullscreen").addClass("fullscreen_bg"),"Moto X3M"==game_name&&addStyle("#GameEmbedSWF","margin-left: 165px !important; width: 92%"),isGameSpecial(game_name)&&($("#GameEmbedDummy").find("iframe").addClass("embedIframe"),addStyle(".embedIframe","margin-left: 165px !important; width: 92%"))):"true"==game_unity?console.log("Unity game"):$("#GameEmbedSWF").addClass("game_fullscreen")}function send_gameplay_end_event(e,t){e=Math.min(e,14400),e=Math.round(Math.max(e,0)),GA_events.track("Game","End",t,e,{dimension23:t,dimension24:e})}function post_game_show_actions_new_game_page(e,t,i){var n={};collect_client_info(),1==t["static"]?n["static"]=!0:n.rand=Math.random(),n.similar_amount=t.similar_amount||5,n.similar=t.similar||!1,n.channel=preroll_channel,n.page_id=t.page_id,n.page_type=t.page_type,n.origin_category=t.origin_category,n.first_game_play_for_visit=t.first_game_play_for_visit,n.thumb_type=t.thumb_type,n.thumb_position=t.thumb_position,n.alt_cdn=t.alt_cdn,n.allow_unity=t.allow_unity,n.adblock_active=adblock_active,n.flash_supported=flash_supported(),n.is_html5_game=t.is_html5_game;(new Date).getTime(),page_load_timestamp;$.getJSON(e,n,function(e){null!=e&&n.similar&&(e.thumb_height=SIMILAR_GAME_TILE_HEIGHT,render_tile_similar_games(e,t.similar_container,t.similars_in_new_page),i&&render_similar_games_next_to_video_new_game_page(e,i),is_chrome_bug_scenario()&&$($(".similar_tile_wrapper a")).attr("target","_blank")),game_page_async_initialization()})}function render_similar_games_next_to_video_new_game_page(e,t){var i;switch("horizontal"==t.render_type&&(e.thumb_height=SIMILAR_VIDEO_TILE_HEIGHT,e.games=e.games.slice(0,6)),e.record_efficiency=!1,t.render_type){case"vertical":i=$("#video_left_vertical_similar");break;case"horizontal":i=$("#video_horizontal_similars")}render_tile_similar_games(e,i)}function game_page_async_initialization(){static_mode||$.ajax(load_popups_path,{type:"get",dataType:"script",cache:"false"}).done(function(){games_json_load(function(){setTimeout(track_banner_impressions,1500)})})}function count_total_game_plays(){var e=0;if("undefined"!=typeof Storage)try{e=localStorage.gp_count?Number(localStorage.gp_count)+1:1,localStorage.gp_count=e}catch(t){}return e}function can_send_track_visit(){var e=!0;if("undefined"!=typeof Storage)try{localStorage.last_visit_sent_on||(localStorage.last_visit_sent_on=0),(e=30<((new Date).getTime()-Number(localStorage.last_visit_sent_on))/6e4)&&(localStorage.last_visit_sent_on=(new Date).getTime())}catch(t){}return e}function increment_local_gameplay_count_in_last_24h(){try{$.jStorage.reInit();var e="last_24h_plays",t=$.jStorage.getTTL(e),i=$.jStorage.get(e);return i?($.jStorage.set(e,i+1,{TTL:t}),i+1):($.jStorage.set(e,1,{TTL:864e5}),1)}catch(n){return 0}}function games_json_load(){return!0}function render_tile_similar_videos(n,e){thumb_count=n.videos.length;var o=e||$("#similar_videos_container");return $.each(n.videos,function(e,t){var i=t;i.rel=n.rel,i.page=n.page,i.thumb_width=SIMILAR_VIDEO_TILE_WIDTH,i.thumb_height=SIMILAR_VIDEO_TILE_HEIGHT,i.thumb_class="similar_video_item",i.thumb_type="similarVideo";new TileVideoThumb({el:$("<div/>",{"class":"similar_video_tile_wrapper"}).appendTo(o),video_hash:i})}),o}function post_show_actions_video(e,t){var i={};collect_client_info(),1==t["static"]?i["static"]=!0:i.rand=Math.random(),i.similar_amount=t.similar_amount||5,i.similar=t.similar||!1,i.channel=preroll_channel,i.page_id=t.page_id,i.page_type=t.page_type,i.first_video_for_visit=t.first_video_for_visit,$.getJSON(e,i,function(e){null!=e&&(render_tile_similar_videos(similar_videos=e),$(".similar_video_tile_wrapper").on("click",function(e){ga("send",{hitType:"event",eventCategory:"Click",eventAction:"Similar videos tile",eventLabel:e.currentTarget.href})})),static_mode||$.ajax(load_popups_path,{type:"get",dataType:"script",cache:"false"}).done(function(){games_json_load(function(){track_banner_impressions()})})})}function render_latest_videos(n){var o=$("#latest_videos");$.each(latest_videos,function(e,t){var i=t;if(i.page=1,i.thumb_height=LATEST_VIDEO_TILE_HEIGHT,i.thumb_width=LATEST_VIDEO_TILE_WIDTH,t.id==video_id){if(!n)return!0;i.thumb_class+=" selected"}new TileVideoThumb({el:$("<div/>",{"class":"latest_video"}).appendTo(o),video_hash:i})}),$("#latest_videos").width(latest_videos.length*$(".latest_video").outerWidth(!0)),$(".latest_videos_wrapper .sub_box_body").mCustomScrollbar({callbacks:{onScroll:calc_visible_thumbs,onTotalScroll:calc_visible_thumbs},horizontalScroll:!0,mouseWheelPixels:150,scrollButtons:{enable:!0}}),0<latest_videos.length&&calc_visible_thumbs(),$(".latest_videos_container #arrow_right_container").click(function(){$(".latest_videos_wrapper .sub_box_body").mCustomScrollbar("scrollTo",-1*parseInt($(".latest_videos_wrapper .mCSB_container").css("left"))+$(".latest_videos_wrapper .sub_box_body").width())}),$(".latest_videos_container #arrow_left_container").click(function(){$(".latest_videos_wrapper .sub_box_body").mCustomScrollbar("scrollTo",-1*parseInt($(".latest_videos_wrapper .mCSB_container").css("left"))-$(".latest_videos_wrapper .sub_box_body").width())}),setInterval(submit_thumbs_impressions,6e3),scroll_selected_video_thumb_into_view()}function scroll_selected_video_thumb_into_view(){var e=$(".thumb.selected"),t=$(".latest_videos_wrapper");if(e.length){var i=e.outerWidth(),n=e.position().left+i+3*i,o=Math.max(0,n-t.width());$(".latest_videos_wrapper .sub_box_body").mCustomScrollbar("scrollTo",o)}}function add_videos_to_impressions_array(e,t){maximal_visible_index=t;for(var i=e;i<=t;i++)impressions_array.push(latest_videos[i].id)}function submit_thumbs_impressions(){if(0<impressions_array.length){var e=impressions_array.join(",");impressions_array=[],$.ajax({url:"/videos/record_impressions",type:"post",async:!1,data:{page:1,ids:e,page_id:page_id}})}}function calc_visible_thumbs(){var e=-1*parseInt($(".latest_videos_wrapper .mCSB_container").css("left"))+$(".latest_videos_wrapper .sub_box_body").width(),t=$(".latest_video").outerWidth(!0),i=Math.round(e/t),n=Math.min(i-1,rendered_video_thumbs_count-1);return n>maximal_visible_index&&add_videos_to_impressions_array(maximal_visible_index+1,n),i}function display_link_after_video_completed(){$("div.youtube_channel_btn").show()}function get_next_video_link(e){var t,i=10,n=(readCookie("videos_played_history")||"").split("|").reverse().slice(0,i);if(e){if(latest_videos!=undefined){var o=0;for(var r in latest_videos)if(latest_videos[r].id==video_id){o=parseInt(r)+1;break}t=find_next_exclude_history(latest_videos.slice(o),n)}t==undefined&&similar_videos!=undefined&&similar_videos.videos!=undefined&&(t=find_next_exclude_history(similar_videos.videos,n))}else similar_videos!=undefined&&similar_videos.videos!=undefined&&(t=find_next_exclude_history(similar_videos.videos,n)),t==undefined&&latest_videos!=undefined&&(t=find_next_exclude_history(latest_videos,n));return console.log("OLD: ",t),t}function find_next_exclude_history(e,t){for(var i=undefined,n=0;n<e.length;n++)if(-1==t.indexOf(String(e[n].id))){(i={}).thumb=e[n].thumb,i.path=e[n].path,i.title=e[n].title;break}return i}function get_video_start_position(e){if((e=e==undefined?window.location.hash.substring(1):e)!=undefined){if(-1<e.toString().indexOf(":")){var t=e.split(":");e=60*parseInt(t[0])+parseInt(t[1])}else e=parseInt(e);return isNaN(e)?0:e}}function toggleSlideOut(){(toggleState=!toggleState)?$("#nav_slide-out").addClass("active"):$("#nav_slide-out").removeClass("active")}function click_close(){$(document).on("click",function(e){element=e.target,0==$(element).closest("#nav_slide-out").length&&0==$(element).closest("#toggle_slideout").length&&toggleState&&toggleSlideOut()})}(function(){function l(e,t,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;if(e._chain&&(e=e._wrapped),t._chain&&(t=t._wrapped),e.isEqual&&k.isFunction(e.isEqual))return e.isEqual(t);if(t.isEqual&&k.isFunction(t.isEqual))return t.isEqual(e);var n=d.call(e);if(n!=d.call(t))return!1;switch(n){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=i.length;o--;)if(i[o]==e)return!0;i.push(e);var r=0,a=!0;if("[object Array]"==n){if(a=(r=e.length)==t.length)for(;r--&&(a=r in e==r in t&&l(e[r],t[r],i)););}else{if("constructor"in e!="constructor"in t||e.constructor!=t.constructor)return!1;for(var s in e)if(k.has(e,s)&&(r++,!(a=k.has(t,s)&&l(e[s],t[s],i))))break;if(a){for(s in t)if(k.has(t,s)&&!r--)break;a=!r}}return i.pop(),a}var e=this,t=e._,a={},o=Array.prototype,i=Object.prototype,n=Function.prototype,s=o.slice,r=o.unshift,d=i.toString,u=i.hasOwnProperty,c=o.forEach,h=o.map,_=o.reduce,p=o.reduceRight,f=o.filter,m=o.every,g=o.some,v=o.indexOf,y=o.lastIndexOf,b=Array.isArray,w=Object.keys,x=n.bind,k=function(e){return new O(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):e._=k,k.VERSION="1.3.3";var $=k.each=k.forEach=function(e,t,i){if(null!=e)if(c&&e.forEach===c)e.forEach(t,i);else if(e.length===+e.length){for(var n=0,o=e.length;n<o;n++)if(n in e&&t.call(i,e[n],n,e)===a)return}else for(var r in e)if(k.has(e,r)&&t.call(i,e[r],r,e)===a)return};k.map=k.collect=function(e,n,o){var r=[];return null==e?r:h&&e.map===h?e.map(n,o):($(e,function(e,t,i){r[r.length]=n.call(o,e,t,i)}),e.length===+e.length&&(r.length=e.length),r)},k.reduce=k.foldl=k.inject=function(e,n,o,r){var a=2<arguments.length;if(null==e&&(e=[]),_&&e.reduce===_)return r&&(n=k.bind(n,r)),a?e.reduce(n,o):e.reduce(n);if($(e,function(e,t,i){a?o=n.call(r,o,e,t,i):(o=e,a=!0)}),!a)throw new TypeError("Reduce of empty array with no initial value");return o},k.reduceRight=k.foldr=function(e,t,i,n){var o=2<arguments.length;if(null==e&&(e=[]),p&&e.reduceRight===p)return n&&(t=k.bind(t,n)),o?e.reduceRight(t,i):e.reduceRight(t);var r=k.toArray(e).reverse();return n&&!o&&(t=k.bind(t,n)),o?k.reduce(r,t,i,n):k.reduce(r,t)},k.find=k.detect=function(e,n,o){var r;return T(e,function(e,t,i){if(n.call(o,e,t,i))return r=e,!0}),r},k.filter=k.select=function(e,n,o){var r=[];return null==e?r:f&&e.filter===f?e.filter(n,o):($(e,function(e,t,i){n.call(o,e,t,i)&&(r[r.length]=e)}),r)},k.reject=function(e,n,o){var r=[];return null==e||$(e,function(e,t,i){n.call(o,e,t,i)||(r[r.length]=e)}),r},k.every=k.all=function(e,n,o){var r=!0;return null==e?r:m&&e.every===m?e.every(n,o):($(e,function(e,t,i){if(!(r=r&&n.call(o,e,t,i)))return a}),!!r)};var T=k.some=k.any=function(e,n,o){n||(n=k.identity);var r=!1;return null==e?r:g&&e.some===g?e.some(n,o):($(e,function(e,t,i){if(r||(r=n.call(o,e,t,i)))return a}),!!r)};k.include=k.contains=function(e,t){var i=!1;return null==e?i:v&&e.indexOf===v?-1!=e.indexOf(t):i=T(e,function(e){return e===t})},k.invoke=function(e,t){var i=s.call(arguments,2);return k.map(e,function(e){return(k.isFunction(t)?t||e:e[t]).apply(e,i)})},k.pluck=function(e,t){return k.map(e,function(e){return e[t]})},k.max=function(e,o,r){if(!o&&k.isArray(e)&&e[0]===+e[0])return Math.max.apply(Math,e);if(!o&&k.isEmpty(e))return-Infinity;var a={computed:-Infinity};return $(e,function(e,t,i){var n=o?o.call(r,e,t,i):e;n>=a.computed&&(a={value:e,computed:n})}),a.value},k.min=function(e,o,r){if(!o&&k.isArray(e)&&e[0]===+e[0])return Math.min.apply(Math,e);if(!o&&k.isEmpty(e))return Infinity;var a={computed:Infinity};return $(e,function(e,t,i){var n=o?o.call(r,e,t,i):e;n<a.computed&&(a={value:e,computed:n})}),a.value},k.shuffle=function(e){var i,n=[];return $(e,function(e,t){i=Math.floor(Math.random()*(t+1)),n[t]=n[i],n[i]=e}),n},k.sortBy=function(e,t,n){var o=k.isFunction(t)?t:function(e){return e[t]};return k.pluck(k.map(e,function(e,t,i){return{value:e,criteria:o.call(n,e,t,i)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;return void 0===i?1:void 0===n?-1:i<n?-1:n<i?1:0}),"value")},k.groupBy=function(e,t){var n={},o=k.isFunction(t)?t:function(e){return e[t]};return $(e,function(e,t){var i=o(e,t);(n[i]||(n[i]=[])).push(e)}),n},k.sortedIndex=function(e,t,i){i||(i=k.identity);for(var n=0,o=e.length;n<o;){var r=n+o>>1;i(e[r])<i(t)?n=r+1:o=r}return n},k.toArray=function(e){return e?k.isArray(e)?s.call(e):k.isArguments(e)?s.call(e):e.toArray&&k.isFunction(e.toArray)?e.toArray():k.values(e):[]},k.size=function(e){return k.isArray(e)?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,i){return null==t||i?e[0]:s.call(e,0,t)},k.initial=function(e,t,i){return s.call(e,0,e.length-(null==t||i?1:t))},k.last=function(e,t,i){return null==t||i?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},k.rest=k.tail=function(e,t,i){return s.call(e,null==t||i?1:t)},k.compact=function(e){return k.filter(e,function(e){return!!e})},k.flatten=function(e,i){return k.reduce(e,function(e,t){return k.isArray(t)?e.concat(i?t:k.flatten(t)):(e[e.length]=t,e)},[])},k.without=function(e){return k.difference(e,s.call(arguments,1))},k.uniq=k.unique=function(n,o,e){var t=e?k.map(n,e):n,r=[];return n.length<3&&(o=!0),k.reduce(t,function(e,t,i){return(o?k.last(e)===t&&e.length:k.include(e,t))||(e.push(t),r.push(n[i])),e},[]),r},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=k.intersect=function(e){var i=s.call(arguments,1);return k.filter(k.uniq(e),function(t){return k.every(i,function(e){return 0<=k.indexOf(e,t)})})},k.difference=function(e){var t=k.flatten(s.call(arguments,1),!0);return k.filter(e,function(e){return!k.include(t,e)})},k.zip=function(){for(var e=s.call(arguments),t=k.max(k.pluck(e,"length")),i=new Array(t),n=0;n<t;n++)i[n]=k.pluck(e,""+n);return i},k.indexOf=function(e,t,i){if(null==e)return-1;var n,o;if(i)return e[n=k.sortedIndex(e,t)]===t?n:-1;if(v&&e.indexOf===v)return e.indexOf(t);for(n=0,o=e.length;n<o;n++)if(n in e&&e[n]===t)return n;return-1},k.lastIndexOf=function(e,t){if(null==e)return-1;if(y&&e.lastIndexOf===y)return e.lastIndexOf(t);for(var i=e.length;i--;)if(i in e&&e[i]===t)return i;return-1},k.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=i||1;for(var n=Math.max(Math.ceil((t-e)/i),0),o=0,r=new Array(n);o<n;)r[o++]=e,e+=i;return r};var S=function(){};k.bind=function F(i,n){var o,r;if(i.bind===x&&x)return x.apply(i,s.call(arguments,1));if(!k.isFunction(i))throw new TypeError;return r=s.call(arguments,2),o=function(){if(!(this instanceof o))return i.apply(n,r.concat(s.call(arguments)));S.prototype=i.prototype;var e=new S,t=i.apply(e,r.concat(s.call(arguments)));return Object(t)===t?t:e}},k.bindAll=function(t){var e=s.call(arguments,1);return 0==e.length&&(e=k.functions(t)),$(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,i){var n={};return i||(i=k.identity),function(){var e=i.apply(this,arguments);return k.has(n,e)?n[e]:n[e]=t.apply(this,arguments)}},k.delay=function(e,t){var i=s.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(s.call(arguments,1)))},k.throttle=function(t,i){var n,o,r,a,s,l,d=k.debounce(function(){s=a=!1},i);return function(){n=this,o=arguments;var e=function(){r=null,s&&t.apply(n,o),d()};return r||(r=setTimeout(e,i)),a?s=!0:l=t.apply(n,o),d(),a=!0,l}},k.debounce=function(n,o,r){var a;return function(){var e=this,t=arguments,i=function(){a=null,r||n.apply(e,t)};r&&!a&&n.apply(e,t),clearTimeout(a),a=setTimeout(i,o)}},k.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments))}},k.wrap=function(t,i){return function(){var e=[t].concat(s.call(arguments,0));return i.apply(this,e)}},k.compose=function(){var i=arguments;return function(){for(var e=arguments,t=i.length-1;0<=t;t--)e=[i[t].apply(this,e)];return e[0]}},k.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},k.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var i in e)k.has(e,i)&&(t[t.length]=i);return t},k.values=function(e){return k.map(e,k.identity)},k.functions=k.methods=function(e){var t=[];for(var i in e)k.isFunction(e[i])&&t.push(i);return t.sort()},k.extend=function(i){return $(s.call(arguments,1),function(e){for(var t in e)i[t]=e[t]}),i},k.pick=function(t){var i={};return $(k.flatten(s.call(arguments,1)),function(e){e in t&&(i[e]=t[e])}),i},k.defaults=function(i){return $(s.call(arguments,1),function(e){for(var t in e)null==i[t]&&(i[t]=e[t])}),i},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e},k.isEqual=function(e,t){return l(e,t,[])},k.isEmpty=function(e){if(null==e)return!0;if(k.isArray(e)||k.isString(e))return 0===e.length;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!(!e||1!=e.nodeType)},k.isArray=b||function(e){return"[object Array]"==d.call(e)},k.isObject=function(e){return e===Object(e)},k.isArguments=function(e){return"[object Arguments]"==d.call(e)},k.isArguments(arguments)||(k.isArguments=function(e){return!(!e||!k.has(e,"callee"))}),k.isFunction=function(e){return"[object Function]"==d.call(e)},k.isString=function(e){return"[object String]"==d.call(e)},k.isNumber=function(e){return"[object Number]"==d.call(e)},k.isFinite=function(e){return k.isNumber(e)&&isFinite(e)},k.isNaN=function(e){return e!=e},k.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==d.call(e)},k.isDate=function(e){return"[object Date]"==d.call(e)},k.isRegExp=function(e){return"[object RegExp]"==d.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return u.call(e,t)},k.noConflict=function(){return e._=t,this},k.identity=function(e){return e},k.times=function(e,t,i){for(var n=0;n<e;n++)t.call(i,n)},k.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},k.result=function(e,t){if(null==e)return null;var i=e[t];return k.isFunction(i)?i.call(e):i},k.mixin=function(t){$(k.functions(t),function(e){R(e,k[e]=t[e])})};var E=0;k.uniqueId=function(e){var t=E++;return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/.^/,C={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"};for(var I in C)C[C[I]]=I;var M=/\\|'|\r|\n|\t|\u2028|\u2029/g,L=/\\(\\|'|r|n|t|u2028|u2029)/g,j=function(e){return e.replace(L,function(e,t){return C[t]})};k.template=function(e,t,i){i=k.defaults(i||{},k.templateSettings);var n="__p+='"+e.replace(M,function(e){return"\\"+C[e]}).replace(i.escape||A,function(e,t){return"'+\n_.escape("+j(t)+")+\n'"}).replace(i.interpolate||A,function(e,t){return"'+\n("+j(t)+")+\n'"}).replace(i.evaluate||A,function(e,t){return"';\n"+j(t)+"\n;__p+='"})+"';\n";i.variable||(n="with(obj||{}){\n"+n+"}\n"),n="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+n+"return __p;\n";var o=new Function(i.variable||"obj","_",n);if(t)return o(t,k);var r=function(e){return o.call(this,e,k)};return r.source="function("+(i.variable||"obj")+"){\n"+n+"}",r},k.chain=function(e){return k(e).chain()};var O=function(e){this._wrapped=e};k.prototype=O.prototype;var z=function(e,t){return t?k(e).chain():e},R=function(e,t){O.prototype[e]=function(){var e=s.call(arguments);return r.call(e,this._wrapped),z(t.apply(k,e),this._chain)}};k.mixin(k),$(["pop","push","reverse","shift","sort","splice","unshift"],function(i){var n=o[i];O.prototype[i]=function(){var e=this._wrapped;n.apply(e,arguments);var t=e.length;return"shift"!=i&&"splice"!=i||0!==t||delete e[0],z(e,this._chain)}}),$(["concat","join","slice"],function(e){var t=o[e];O.prototype[e]=function(){return z(t.apply(this._wrapped,arguments),this._chain)}}),O.prototype.chain=function(){return this._chain=!0,this},O.prototype.value=function(){return this._wrapped}}).call(this),function(){var u,e=this,t=e.Backbone,l=Array.prototype.slice,c=Array.prototype.splice;(u="undefined"!=typeof exports?exports:e.Backbone={}).VERSION="0.9.2";var h=e._;h||"undefined"==typeof require||(h=require("underscore"));var a=e.jQuery||e.Zepto||e.ender;u.setDomLibrary=function(e){a=e},u.noConflict=function(){return e.Backbone=t,this},u.emulateHTTP=!1,u.emulateJSON=!1;var d=/\s+/,i=u.Events={on:function(e,t,i){var n,o,r,a,s;if(!t)return this;for(e=e.split(d),n=this._callbacks||(this._callbacks={});o=e.shift();)(r=(s=n[o])?s.tail:{}).next=a={},r.context=i,r.callback=t,n[o]={tail:a,next:s?s.next:r};return this},off:function(e,t,i){var n,o,r,a,s,l;if(o=this._callbacks){if(!(e||t||i))return delete this._callbacks,this;for(e=e?e.split(d):h.keys(o);n=e.shift();)if(r=o[n],delete o[n],r&&(t||i))for(a=r.tail;(r=r.next)!==a;)s=r.callback,l=r.context,(t&&s!==t||i&&l!==i)&&this.on(n,s,l);return this}},trigger:function(e){var t,i,n,o,r,a,s;if(!(n=this._callbacks))return this;for(a=n.all,e=e.split(d),s=l.call(arguments,1);t=e.shift();){if(i=n[t])for(o=i.tail;(i=i.next)!==o;)i.callback.apply(i.context||this,s);if(i=a)for(o=i.tail,r=[t].concat(s);(i=i.next)!==o;)i.callback.apply(i.context||this,r)}return this}};i.bind=i.on,i.unbind=i.off;var _=u.Model=function(e,t){var i;e||(e={}),t&&t.parse&&(e=this.parse(e)),(i=S(this,"defaults"))&&(e=h.extend({},i,e)),t&&t.collection&&(this.collection=t.collection),this.attributes={},this._escapedAttributes={},this.cid=h.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(e,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=h.clone(this.attributes),this.initialize.apply(this,arguments)};h.extend(_.prototype,i,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return h.clone(this.attributes)},get:function(e){return this.attributes[e]},escape:function(e){var t;if(t=this._escapedAttributes[e])return t;var i=this.get(e);return this._escapedAttributes[e]=h.escape(null==i?"":""+i)},has:function(e){return null!=this.get(e)},set:function(e,t,i){var n,o,r;if(h.isObject(e)||null==e?(n=e,i=t):(n={})[e]=t,i||(i={}),!n)return this;if(n instanceof _&&(n=n.attributes),i.unset)for(o in n)n[o]=void 0;if(!this._validate(n,i))return!1;this.idAttribute in n&&(this.id=n[this.idAttribute]);var a=i.changes={},s=this.attributes,l=this._escapedAttributes,d=this._previousAttributes||{};for(o in n)r=n[o],(!h.isEqual(s[o],r)||i.unset&&h.has(s,o))&&(delete l[o],(i.silent?this._silent:a)[o]=!0),i.unset?delete s[o]:s[o]=r,h.isEqual(d[o],r)&&h.has(s,o)==h.has(d,o)?(delete this.changed[o],delete this._pending[o]):(this.changed[o]=r,i.silent||(this._pending[o]=!0));return i.silent||this.change(i),this},unset:function(e,t){return(t||(t={})).unset=!0,this.set(e,null,t)},clear:function(e){return(e||(e={})).unset=!0,this.set(h.clone(this.attributes),e)},fetch:function(n){n=n?h.clone(n):{};var o=this,r=n.success;return n.success=function(e,t,i){if(!o.set(o.parse(e,i),n))return!1;r&&r(o,e)},n.error=u.wrapError(n.error,o,n),(this.sync||u.sync).call(this,"read",this,n)},save:function(e,t,o){var r,i;if(h.isObject(e)||null==e?(r=e,o=t):(r={})[e]=t,(o=o?h.clone(o):{}).wait){if(!this._validate(r,o))return!1;i=h.clone(this.attributes)}var n=h.extend({},o,{silent:!0});if(r&&!this.set(r,o.wait?n:o))return!1;var a=this,s=o.success;o.success=function(e,t,i){var n=a.parse(e,i);if(o.wait&&(delete o.wait,n=h.extend(r||{},n)),!a.set(n,o))return!1;s?s(a,e):a.trigger("sync",a,e,o)},o.error=u.wrapError(o.error,a,o);var l=this.isNew()?"create":"update",d=(this.sync||u.sync).call(this,l,this,o);return o.wait&&this.set(i,n),d},destroy:function(t){t=t?h.clone(t):{};var i=this,n=t.success,o=function(){i.trigger("destroy",i,i.collection,t)};if(this.isNew())return o(),!1;t.success=function(e){t.wait&&o(),n?n(i,e):i.trigger("sync",i,e,t)},t.error=u.wrapError(t.error,i,t);var e=(this.sync||u.sync).call(this,"delete",this,t);return t.wait||o(),e},url:function(){var e=S(this,"urlRoot")||S(this.collection,"url")||E();return this.isNew()?e:e+("/"==e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(e){e||(e={});var t=this._changing;for(var i in this._changing=!0,this._silent)this._pending[i]=!0;var n=h.extend({},e.changes,this._silent);for(var i in this._silent={},n)this.trigger("change:"+i,this,this.get(i),e);if(t)return this;for(;!h.isEmpty(this._pending);){for(var i in this._pending={},this.trigger("change",this,e),this.changed)this._pending[i]||this._silent[i]||delete this.changed[i];this._previousAttributes=h.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(e){return arguments.length?h.has(this.changed,e):!h.isEmpty(this.changed)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&h.clone(this.changed);var t,i=!1,n=this._previousAttributes;for(var o in e)h.isEqual(n[o],t=e[o])||((i||(i={}))[o]=t);return i},previous:function(e){return arguments.length&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return h.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(e,t){if(t.silent||!this.validate)return!0;e=h.extend({},this.attributes,e);var i=this.validate(e,t);return!i||(t&&t.error?t.error(this,i,t):this.trigger("error",this,i,t),!1)}});var n=u.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,{silent:!0,parse:t.parse})};h.extend(n.prototype,i,{model:_,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},add:function(e,t){var i,n,o,r,a,s,l={},d={},u=[];for(t||(t={}),i=0,o=(e=h.isArray(e)?e.slice():[e]).length;i<o;i++){if(!(r=e[i]=this._prepareModel(e[i],t)))throw new Error("Can't add an invalid model to a collection");a=r.cid,s=r.id,l[a]||this._byCid[a]||null!=s&&(d[s]||this._byId[s])?u.push(i):l[a]=d[s]=r}for(i=u.length;i--;)e.splice(u[i],1);for(i=0,o=e.length;i<o;i++)(r=e[i]).on("all",this._onModelEvent,this),null!=(this._byCid[r.cid]=r).id&&(this._byId[r.id]=r);if(this.length+=o,n=null!=t.at?t.at:this.models.length,c.apply(this.models,[n,0].concat(e)),this.comparator&&this.sort({silent:!0}),t.silent)return this;for(i=0,o=this.models.length;i<o;i++)l[(r=this.models[i]).cid]&&(t.index=i,r.trigger("add",r,this,t));return this},remove:function(e,t){var i,n,o,r;for(t||(t={}),i=0,n=(e=h.isArray(e)?e.slice():[e]).length;i<n;i++)(r=this.getByCid(e[i])||this.get(e[i]))&&(delete this._byId[r.id],delete this._byCid[r.cid],o=this.indexOf(r),this.models.splice(o,1),this.length--,t.silent||(t.index=o,r.trigger("remove",r,this,t)),this._removeReference(r));return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,t),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,h.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},get:function(e){if(null!=e)return this._byId[null!=e.id?e.id:e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},where:function(i){return h.isEmpty(i)?[]:this.filter(function(e){for(var t in i)if(i[t]!==e.get(t))return!1;return!0})},sort:function(e){if(e||(e={}),!this.comparator)throw new Error("Cannot sort a set without a comparator");var t=h.bind(this.comparator,this);return 1==this.comparator.length?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("reset",this,e),this},pluck:function(t){return h.map(this.models,function(e){return e.get(t)})},reset:function(e,t){e||(e=[]),t||(t={});for(var i=0,n=this.models.length;i<n;i++)this._removeReference(this.models[i]);return this._reset(),this.add(e,h.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(n
){(n=n?h.clone(n):{}).parse===undefined&&(n.parse=!0);var o=this,r=n.success;return n.success=function(e,t,i){o[n.add?"add":"reset"](o.parse(e,i),n),r&&r(o,e)},n.error=u.wrapError(n.error,o,n),(this.sync||u.sync).call(this,"read",this,n)},create:function(i,n){var o=this;if(n=n?h.clone(n):{},!(i=this._prepareModel(i,n)))return!1;n.wait||o.add(i,n);var r=n.success;return n.success=function(e,t){n.wait&&o.add(e,n),r?r(e,t):e.trigger("sync",i,t,n)},i.save(null,n),i},parse:function(e){return e},chain:function(){return h(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){if(t||(t={}),e instanceof _)e.collection||(e.collection=this);else{var i=e;(e=new(t.collection=this).model(i,t))._validate(e.attributes,t)||(e=!1)}return e},_removeReference:function(e){this==e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!=e&&"remove"!=e||i==this)&&("destroy"==e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],this._byId[t.id]=t),this.trigger.apply(this,arguments))}});var o=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];h.each(o,function(e){n.prototype[e]=function(){return h[e].apply(h,[this.models].concat(h.toArray(arguments)))}});var r=u.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},s=/:\w+/g,p=/\*\w+/g,f=/[-[\]{}()+?.,\\^$|#\s]/g;h.extend(r.prototype,i,{initialize:function(){},route:function(i,n,o){return u.history||(u.history=new m),h.isRegExp(i)||(i=this._routeToRegExp(i)),o||(o=this[n]),u.history.route(i,h.bind(function(e){var t=this._extractParameters(i,e);o&&o.apply(this,t),this.trigger.apply(this,["route:"+n].concat(t)),u.history.trigger("route",this,n,t)},this)),this},navigate:function(e,t){u.history.navigate(e,t)},_bindRoutes:function(){if(this.routes){var e=[];for(var t in this.routes)e.unshift([t,this.routes[t]]);for(var i=0,n=e.length;i<n;i++)this.route(e[i][0],e[i][1],this[e[i][1]])}},_routeToRegExp:function(e){return e=e.replace(f,"\\$&").replace(s,"([^/]+)").replace(p,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var m=u.History=function(){this.handlers=[],h.bindAll(this,"checkUrl")},g=/^[#\/]/,v=/msie [\w.]+/;m.started=!1,h.extend(m.prototype,i,{interval:50,getHash:function(e){var t=(e?e.location:window.location).href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||t){e=window.location.pathname;var i=window.location.search;i&&(e+=i)}else e=this.getHash();return e.indexOf(this.options.root)||(e=e.substr(this.options.root.length)),e.replace(g,"")},start:function(e){if(m.started)throw new Error("Backbone.history has already been started");m.started=!0,this.options=h.extend({},{root:"/"},this.options,e),this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var t=this.getFragment(),i=document.documentMode,n=v.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);n&&(this.iframe=a('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?a(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!n?a(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var o=window.location,r=o.pathname==this.options.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!r?(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&r&&o.hash&&(this.fragment=this.getHash().replace(g,""),window.history.replaceState({},document.title,o.protocol+"//"+o.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},stop:function(){a(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),m.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();if(e==this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e==this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e);return h.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(e,t){if(!m.started)return!1;t&&!0!==t||(t={trigger:t});var i=(e||"").replace(g,"");this.fragment!=i&&(this._hasPushState?(0!=i.indexOf(this.options.root)&&(i=this.options.root+i),this.fragment=i,window.history[t.replace?"replaceState":"pushState"]({},document.title,i)):this._wantsHashChange?(this.fragment=i,this._updateHash(window.location,i,t.replace),this.iframe&&i!=this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,i,t.replace))):window.location.assign(this.options.root+e),t.trigger&&this.loadUrl(e))},_updateHash:function(e,t,i){i?e.replace(e.toString().replace(/(javascript:|#).*$/,"")+"#"+t):e.hash=t}});var y=u.View=function(e){this.cid=h.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName"];h.extend(y.prototype,i,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(e,t,i){var n=document.createElement(e);return t&&a(n).attr(t),i&&a(n).html(i),n},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof a?e:a(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this},delegateEvents:function(e){if(e||(e=S(this,"events")))for(var t in this.undelegateEvents(),e){var i=e[t];if(h.isFunction(i)||(i=this[e[t]]),!i)throw new Error('Method "'+e[t]+'" does not exist');var n=t.match(b),o=n[1],r=n[2];i=h.bind(i,this),o+=".delegateEvents"+this.cid,""===r?this.$el.bind(o,i):this.$el.delegate(r,o,i)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=h.extend({},this.options,e));for(var t=0,i=w.length;t<i;t++){var n=w[t];e[n]&&(this[n]=e[n])}this.options=e},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var e=S(this,"attributes")||{};this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),this.setElement(this.make(this.tagName,e),!1)}}});var x=function(e,t){var i=T(this,e,t);return i.extend=this.extend,i};_.extend=n.extend=r.extend=y.extend=x;var k={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};u.sync=function(e,t,i){var n=k[e];i||(i={});var o={type:n,dataType:"json"};return i.url||(o.url=S(t,"url")||E()),i.data||!t||"create"!=e&&"update"!=e||(o.contentType="application/json",o.data=JSON.stringify(t.toJSON())),u.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),u.emulateHTTP&&("PUT"!==n&&"DELETE"!==n||(u.emulateJSON&&(o.data._method=n),o.type="POST",o.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",n)})),"GET"===o.type||u.emulateJSON||(o.processData=!1),a.ajax(h.extend(o,i))},u.wrapError=function(i,n,o){return function(e,t){t=e===n?t:e,i?i(n,t,o):n.trigger("error",n,t,o)}};var $=function(){},T=function(e,t,i){var n;return n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){e.apply(this,arguments)},h.extend(n,e),$.prototype=e.prototype,n.prototype=new $,t&&h.extend(n.prototype,t),i&&h.extend(n,i),(n.prototype.constructor=n).__super__=e.prototype,n},S=function(e,t){return e&&e[t]?h.isFunction(e[t])?e[t]():e[t]:null},E=function(){throw new Error('A "url" property or function must be specified')}}.call(this);var swfobject=function(){function t(){if(!U){try{var e=R.getElementsByTagName("body")[0].appendChild(m("span"));e.parentNode.removeChild(e)}catch(n){return}U=!0;for(var t=B.length,i=0;i<t;i++)B[i]()}}function e(e){U?e():B[B.length]=e}function i(e){if(typeof z.addEventListener!=A)z.addEventListener("load",e,!1);else if(typeof R.addEventListener!=A)R.addEventListener("load",e,!1);else if(typeof z.attachEvent!=A)d(z,"onload",e);else if("function"==typeof z.onload){var t=z.onload;z.onload=function(){t(),e()}}else z.onload=e}function n(){P?o():r()}function o(){var t=R.getElementsByTagName("body")[0],i=m(C);i.setAttribute("type",L);var n=t.appendChild(i);if(n){var o=0;!function(){if(typeof n.GetVariable!=A){var e=n.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),q.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(o<10)return o++,setTimeout(arguments.callee,10);t.removeChild(i),n=null,r()}()}else r()}function r(){var e=N.length;if(0<e)for(var t=0;t<e;t++){var i=N[t].id,n=N[t].callbackFn,o={success:!1,id:i};if(0<q.pv[0]){var r=f(i);if(r)if(!b(N[t].swfVersion)||q.wk&&q.wk<312)if(N[t].expressInstall&&g()){var a={};a.data=N[t].expressInstall,a.width=r.getAttribute("width")||"0",a.height=r.getAttribute("height")||"0",r.getAttribute("class")&&(a.styleclass=r.getAttribute("class")),r.getAttribute("align")&&(a.align=r.getAttribute("align"));for(var s={},l=r.getElementsByTagName("param"),d=l.length,u=0;u<d;u++)"movie"!=l[u].getAttribute("name").toLowerCase()&&(s[l[u].getAttribute("name")]=l[u].getAttribute("value"));v(a,s,i,n)}else _(r),n&&n(o);else w(i,!0),n&&(o.success=!0,o.ref=h(i),n(o))}else if(w(i,!0),n){var c=h(i);c&&typeof c.SetVariable!=A&&(o.success=!0,o.ref=c),n(o)}}}function h(e){var t=null,i=f(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=A)t=i;else{var n=i.getElementsByTagName(C)[0];n&&(t=n)}return t}function g(){return!W&&b("6.0.65")&&(q.win||q.mac)&&!(q.wk&&q.wk<312)}function v(e,t,i,n){$=n||null,T={success:!(W=!0),id:i};var o=f(i);if(o){k="OBJECT"==o.nodeName?(x=l(o),null):(x=o,i),e.id=j,(typeof e.width==A||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==A||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),R.title=R.title.slice(0,47)+" - Flash Player Installation";var r=q.ie&&q.win?"ActiveX":"PlugIn",a="MMredirectURL="+z.location.toString().replace(/&/g,"%26")+"&MMplayerType="+r+"&MMdoctitle="+R.title;if(typeof t.flashvars!=A?t.flashvars+="&"+a:t.flashvars=a,q.ie&&q.win&&4!=o.readyState){var s=m("div");i+="SWFObjectNew",s.setAttribute("id",i),o.parentNode.insertBefore(s,o),o.style.display="none",function(){4==o.readyState?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}y(e,t,i)}}function _(e){if(q.ie&&q.win&&4!=e.readyState){var t=m("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(l(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(l(e),e)}function l(e){var t=m("div");if(q.win&&q.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(C)[0];if(i){var n=i.childNodes;if(n)for(var o=n.length,r=0;r<o;r++)1==n[r].nodeType&&"PARAM"==n[r].nodeName||8==n[r].nodeType||t.appendChild(n[r].cloneNode(!0))}}return t}function y(e,t,i){var n,o=f(i);if(q.wk&&q.wk<312)return n;if(o)if(typeof e.id==A&&(e.id=i),q.ie&&q.win){var r="";for(var a in e)e[a]!=Object.prototype[a]&&("data"==a.toLowerCase()?t.movie=e[a]:"styleclass"==a.toLowerCase()?r+=' class="'+e[a]+'"':"classid"!=a.toLowerCase()&&(r+=" "+a+'="'+e[a]+'"'));var s="";for(var l in t)t[l]!=Object.prototype[l]&&(s+='<param name="'+l+'" value="'+t[l]+'" />');o.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+r+">"+s+"</object>",D[D.length]=e.id,n=f(e.id)}else{var d=m(C);for(var u in d.setAttribute("type",L),e)e[u]!=Object.prototype[u]&&("styleclass"==u.toLowerCase()?d.setAttribute("class",e[u]):"classid"!=u.toLowerCase()&&d.setAttribute(u,e[u]));for(var c in t)t[c]!=Object.prototype[c]&&"movie"!=c.toLowerCase()&&p(d,c,t[c]);o.parentNode.replaceChild(d,o),n=d}return n}function p(e,t,i){var n=m("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)}function a(e){var t=f(e);t&&"OBJECT"==t.nodeName&&(q.ie&&q.win?(t.style.display="none",function(){4==t.readyState?s(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function s(e){var t=f(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function f(e){var t=null;try{t=R.getElementById(e)}catch(i){}return t}function m(e){return R.createElement(e)}function d(e,t,i){e.attachEvent(t,i),G[G.length]=[e,t,i]}function b(e){var t=q.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]}function u(e,t,i,n){if(!q.ie||!q.mac){var o=R.getElementsByTagName("head")[0];if(o){var r=i&&"string"==typeof i?i:"screen";if(n&&(E=S=null),!S||E!=r){var a=m("style");a.setAttribute("type","text/css"),a.setAttribute("media",r),S=o.appendChild(a),q.ie&&q.win&&typeof R.styleSheets!=A&&0<R.styleSheets.length&&(S=R.styleSheets[R.styleSheets.length-1]),E=r}q.ie&&q.win?S&&typeof S.addRule==C&&S.addRule(e,t):S&&typeof R.createTextNode!=A&&S.appendChild(R.createTextNode(e+" {"+t+"}"))}}}function w(e,t){if(V){var i=t?"visible":"hidden";U&&f(e)?f(e).style.visibility=i:u("#"+e,"visibility:"+i)}}function c(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=A?encodeURIComponent(e):e}var x,k,$,T,S,E,A="undefined",C="object",I="Shockwave Flash",M="ShockwaveFlash.ShockwaveFlash",L="application/x-shockwave-flash",j="SWFObjectExprInst",O="onreadystatechange",z=window,R=document,F=navigator,P=!1,B=[n],N=[],D=[],G=[],U=!1,W=!1,V=!0,q=function(){var e=typeof R.getElementById!=A&&typeof R.getElementsByTagName!=A&&typeof R.createElement!=A,t=F.userAgent.toLowerCase(),i=F.platform.toLowerCase(),n=i?/win/.test(i):/win/.test(t),o=i?/mac/.test(i):/mac/.test(t),r=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),a=!1,s=[0,0,0],l=null;if(typeof F.plugins!=A&&typeof F.plugins[I]==C)!(l=F.plugins[I].description)||typeof F.mimeTypes!=A&&F.mimeTypes[L]&&!F.mimeTypes[L].enabledPlugin||(a=!(P=!0),l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof z.ActiveXObject!=A)try{var d=new ActiveXObject(M);d&&(l=d.GetVariable("$version"))&&(a=!0,l=l.split(" ")[1].split(","),s=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)])}catch(u){}return{w3:e,pv:s,wk:r,ie:a,win:n,mac:o}}();q.w3&&((typeof R.readyState!=A&&"complete"==R.readyState||typeof R.readyState==A&&(R.getElementsByTagName("body")[0]||R.body))&&t(),U||(typeof R.addEventListener!=A&&R.addEventListener("DOMContentLoaded",t,!1),q.ie&&q.win&&(R.attachEvent(O,function(){"complete"==R.readyState&&(R.detachEvent(O,arguments.callee),t())}),z==top&&function(){if(!U){try{R.documentElement.doScroll("left")}catch(e){return setTimeout(arguments.callee,0)}t()}}()),q.wk&&function(){U||(/loaded|complete/.test(R.readyState)?t():setTimeout(arguments.callee,0))}(),i(t))),q.ie&&q.win&&window.attachEvent("onunload",function(){for(var e=G.length,t=0;t<e;t++)G[t][0].detachEvent(G[t][1],G[t][2]);for(var i=D.length,n=0;n<i;n++)a(D[n]);for(var o in q)q[o]=null;for(var r in q=null,swfobject)swfobject[r]=null;swfobject=null});return{registerObject:function(e,t,i,n){if(q.w3&&e&&t){var o={};o.id=e,o.swfVersion=t,o.expressInstall=i,o.callbackFn=n,N[N.length]=o,w(e,!1)}else n&&n({success:!1,id:e})},getObjectById:function(e){if(q.w3)return h(e)},embedSWF:function(a,s,l,d,u,c,h,_,p,f){var m={success:!1,id:s};q.w3&&!(q.wk&&q.wk<312)&&a&&s&&l&&d&&u?(w(s,!1),e(function(){l+="",d+="";var e={};if(p&&typeof p===C)for(var t in p)e[t]=p[t];e.data=a,e.width=l,e.height=d;var i={};if(_&&typeof _===C)for(var n in _)i[n]=_[n];if(h&&typeof h===C)for(var o in h)typeof i.flashvars!=A?i.flashvars+="&"+o+"="+h[o]:i.flashvars=o+"="+h[o];if(b(u)){var r=y(e,i,s);e.id==s&&w(s,!0),m.success=!0,m.ref=r}else{if(c&&g())return e.data=c,void v(e,i,s,f);w(s,!0)}f&&f(m)})):f&&f(m)},switchOffAutoHideShow:function(){V=!1},ua:q,getFlashPlayerVersion:function(){return{major:q.pv[0],minor:q.pv[1],release:q.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(e,t,i){return q.w3?y(e,t,i):undefined},showExpressInstall:function(e,t,i,n){q.w3&&g()&&v(e,t,i,n)},removeSWF:function(e){q.w3&&a(e)},createCSS:function(e,t,i,n){q.w3&&u(e,t,i,n)},addDomLoadEvent:e,addLoadEvent:i,getQueryParamValue:function(e){var t=R.location.search||R.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return c(t);for(var i=t.split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==e)return c(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(W){var e=f(j);e&&x&&(e.parentNode.replaceChild(x,e),k&&(w(k,!0),q.ie&&q.win&&(x.style.display="block")),$&&$(T)),W=!1}}}}(),thumb_count=0,thumbs_loaded=0,banner_impressions=0,actual_banner_impressions=0,google_banner_impressions=0,google_actual_banner_impressions=0,dfp_events_arr=[],isUnloading=0,play_in_session=0,video_attempts=0,video_impressions=0,preroll_impressions=0,midroll_impressions=0,time_until_preroll=null,time_until_afg_fallback=null,time_until_game=null,time_until_video_attempt=null,time_until_ad_loaded=null,ad_tracked=!1,isOverGoogleAd=!1,ads_layout="none",single_skyscraper_mode="",abtest1Alt="none",abtest2Alt="none",abtest3Alt="none",abtest4Alt="none",abtest5Alt="none",ch_date_value="0_0",child_directed="false",videos_allowed=!1,is_paid_visit="false",new_minigames=!1,actual_banners_arr={},conversion_value="0",track_ad_impressions="/"+"track_ad_impressions".split("").reverse().join(""),track_ad_click="/"+"track_ad_click".split("").reverse().join(""),adblock_active=!0,is_incognito=!1,roas_conversion_id="945781763",google_ads_types=[];(google_conversion_labels=[]).AFV="fDACCK2Bs18Qg_j9wgM",google_conversion_labels.AFG="4cGpCIDFp18Qg_j9wgM",google_conversion_labels.AFC="s63GCJrLrF8Qg_j9wgM",google_ads_types.AFC="AFC",google_ads_types.AFG_Midroll="AFG",google_ads_types.AFG_Midroll_HTML5_Games="AFG",google_ads_types.AFV_Preroll="AFV",google_ads_types.Kizi_Preroll="AFG",google_ads_types.Kizi_html5_Preroll="AFG",_.templateSettings={interpolate:/\{\{\=(.+?)\}\}/g,evaluate:/\{\{(.+?)\}\}/g};var money_movers_maker_path="/games/money-movers-maker";window.console||(console={log:function(){}}),TileGameThumb=Backbone.View.extend({initialize:function(e){this.game_hash=e.game_hash,this.swap_direction=e.swap_direction,this.render()},render:function(){"object"!=(typeof this.game_hash.thumb_dimension).toLowerCase()&&(this.game_hash.thumb_dimension={width:parseInt(this.game_hash.thumb_dimension),height:parseInt(this.game_hash.thumb_dimension)}),thumb_type=this.game_hash.thumb_type==undefined?"":this.game_hash.thumb_type,thumb_position=this.game_hash.thumb_position==undefined?"":this.game_hash.thumb_position,"undefined"!=typeof this.game_hash.duration&&0<parseInt(this.game_hash.duration)?duration_element=setup_duration_element(parseInt(this.game_hash.duration),{bottom:"5",right:"5"}):duration_element="";var e={new_game_class:this.game_hash["new"]?"new_game":"",name:this.game_hash.name,rel:this.game_hash.rel+"|"+this.game_hash.rel_id+"|"+this.game_hash.page+"|"+thumb_type+"|"+thumb_position+"|"+this.game_hash.category,new_ribbon_img:this.game_hash["new"]?"<img style='width:"+.5*this.game_hash.thumb_dimension.height+"px;height:"+.5*this.game_hash.thumb_dimension.height+"px' src='https://cdn8.kizi.com/assets/common/new_ribbon_new_img-69cacfca2a3c970477aa01146098ee1b.png' class='new_ribbon'/>":"",play_icon_img:this.game_hash.render_play_icon?"<img src='https://cdn8.kizi.com/assets/videos/play_icon-9d1d6c4980798774ff903bfb8e0c26ea.png' class='play_icon_on_catalog_thumb' style='width:"+this.game_hash.thumb_dimension.width+"px;height:"+this.game_hash.thumb_dimension.height+"px;'/>":"",is_video:this.game_hash.is_video,duration:duration_element,thumb_src:this.game_hash.thumb,coins_img:this.game_hash.coins?"<img src='https://cdn8.kizi.com/assets/collections/coins_new-57fd8099557e00ffbf32832eedfed910.png' class='kizi_coins' height="+Math.round(.2*this.game_hash.thumb_dimension.height)+" width="+Math.round(.2*this.game_hash.thumb_dimension.height)+" />":"",multiplayer_img:this.game_hash.multiplayer?"<img src='https://cdn8.kizi.com/assets/common/multiplayer-978206bf4a9520467fe7dde6aef62124.png' class='multiplayer_game' height="+Math.round(.2*this.game_hash.thumb_dimension.height)+" width="+Math.round(.2*this.game_hash.thumb_dimension.height)+" />":"",game_path:this.game_hash.path,wrapper_style:"width:"+this.game_hash.thumb_dimension.width+"px;height:"+this.game_hash.thumb_dimension.height+"px",thumb_style:"width:"+this.game_hash.thumb_dimension.width+"px;height:"+this.game_hash.thumb_dimension.height+"px;",thumb_width:this.game_hash.thumb_dimension.width,thumb_height:this.game_hash.thumb_dimension.height,thumb_type:this.game_hash.thumb_type,optional_thumb_params:this.game_hash.optional_thumb_params||"",optional_link_params:this.game_hash.optional_link_params||""};"object"==typeof this.game_hash.box_dimension&&(e.fade_effect_pos_fix=Math.round((this.game_hash.box_dimension.width-(this.game_hash.thumb_dimension.width+6))/2));var t=$(this.el);(t.hasClass("similar_tile_wrapper")||t.hasClass("affiliate_game_wrapper"))&&(e.current_plays=Math.floor(9e3*Math.random())+1e3);var i=_.template($("#tile_thumb_template").html(),e);t.html(i)},events:{"mouseenter .thumb_overlay":function(e){GameCard.eventShow.call(e.currentTarget)},"mouseleave .thumb_overlay":function(e){GameCard.hide.call(e.currentTarget)},"click .thumb_overlay":function(e){GameCard.cancelLoad.call(e.currentTarget)},"mouseenter .thumb":function(){"home_mini"==window.page_type&&$("#kizi_large_logo .current_thumb_title").html(this.game_hash.name)},"mouseleave .thumb":function(){"home_mini"==window.page_type&&$("#kizi_large_logo .current_thumb_title").html("")},"click .thumb":function(e){this.game_hash.click_callback&&this.game_hash.click_callback(),this.game_hash.record_click&&handleClick.call(e.currentTarget)}}});var banner_clicked,window_focused,override_show_on_cbox_close=!(GameCard={timer:null,thumb_timer:null,iframeOverlay:null,eventShow:function(){var e=$(this);clearTimeout(GameCard.timer),GameCard.timer=setTimeout(function(){GameCard.show(e)},200)},show:function(e){e=$(e),GameCard.hide_all();var t=e.closest(".thumb"),i={height:t.find("img.thumb_image").outerHeight(),width:t.find("img.thumb_image").outerWidth()},n={height:t.outerHeight(),width:t.outerWidth()},o=$("<div/>",{"class":"card_overlay moving_part"}).css({width:i.width+"px",height:i.height+"px",opacity:.7,backgroundColor:"#000000",position:"absolute",left:"0px",zIndex:6,top:i.height+"px"}),r=$("<div/>",{"class":"card_overlay moving_part"}).css({width:i.width+"px",height:i.height+"px",position:"absolute",left:"0px",zIndex:7,top:i.height+"px"}),a=$("<div/>",{"class":"card_overlay card_wrapper"}).css({width:i.width+"px",height:i.height+"px",position:"absolute",overflow:"hidden",left:0,top:0}),s=$("<div/>",{"class":"game_card_yellow_text kizi_font"}).css({textAlign:"center",fontSize:.12*n.height+"px",paddingTop:.02*n.height+"px"}).html(t.attr("name"));r.append(s),a.append(o),a.append(r),t.append(a),t.find(".moving_part").stop(!0);var l=n.height-.05*n.height-s.height();t.find(".moving_part").animate({top:l+"px"},{duration:400,easing:"easeOutCubic"})},hide:function(e){var t=e||$(this),i=t.closest(".thumb").find(".moving_part");i.stop(!0),i.animate({top:t.height()+"px"},{duration:150,easing:"easeOutCubic",complete:function(){i.parent().remove()}}),clearTimeout(GameCard.timer)},hide_all:function(){$(".card_wrapper").each(function(e,t){GameCard.hide($(t))})},cancelLoad:function(){$(".card_overlay").remove(),clearTimeout(GameCard.timer)}});$(document).bind("cbox_open",function(){hide_flash_elements()}).bind("cbox_closed",function(){override_show_on_cbox_close||show_flash_elements()}),$(document).ready(function(){setTimeout(function(){$("form input").change()},1e3)}),Toolbar={cookieName:"t_action",addAction:function(e,t){if(window.toolbarInfo&&window.toolbarInfo.returnValue){var i=readCookie(Toolbar.cookieName),n=t?e+","+t:e;if(i){var o=i.split("|");o.push(n),o=o.slice(-3),createCookie(Toolbar.cookieName,o.join("|"))}else createCookie(Toolbar.cookieName,n)}},reload:function(){Toolbar.addAction("reload")},updateCoins:function(e){Toolbar.addAction("update_coins",e)}},NotifcationUpdater={is_sidebar:!1,timeoutObj:null,timeout:12e4,start:function(e){clearInterval(NotifcationUpdater.timeoutObj),NotifcationUpdater.timeoutObj=setInterval(NotifcationUpdater.check,NotifcationUpdater.timeout),e&&(NotifcationUpdater.is_sidebar=!0)},stop:function(){clearInterval(NotifcationUpdater.timeoutObj)},check:function(){var e=$("#new_notifications_count").text()||0,t=$("#friend_requests_count").text()||0;$.ajax("/notifications/refresh_count",{type:"get",data:{count:e,friend_requests:t,page_type:window.page_type},dataType:"script"})}},window.fbAsyncInit=function(){FB.init({appId:0x831a1cce4c90,status:!0,cookie:!0,oauth:!0,xfbml:!0,version:"v2.5"})},$(window).on("load",function(){setTimeout(function(){var e,t=document,i="facebook-jssdk";t.getElementById(i)||((e=t.createElement("script")).id=i,e.async=!0,e.src="//connect.facebook.net/en_US/all.js",t.getElementsByTagName("head")[0].appendChild(e))},4e3)}),$(document).ready(function(){var e=["https://cdn8.kizi.com/assets/collections/join_hover-16c115122b9fb53bb7fe67c8414b2920.png","https://cdn8.kizi.com/assets/collections/login_hover-8cb13c3aa56b53af5af247a19725a4a6.png","https://cdn8.kizi.com/assets/games/leader_board_nav_up_bg_hover-92685430d93a7a7ad09eba81aa430839.png","https://cdn8.kizi.com/assets/games/leader_board_nav_down_bg_hover-a18a14e8d0ffceef35a6bda5e207800c.png","https://cdn8.kizi.com/assets/games/add_friends_button_hover-d95f5ba56476747ffd2296b34fb8c00b.png","https://cdn8.kizi.com/assets/games/send_gift_button_hover-580ae2fb5cbec281f689c3c4f5be922a.png","https://cdn8.kizi.com/assets/games/edit_button_hover_bg-9eb00f8458b88edd7d90e95b3ef2eee7.png","https://cdn8.kizi.com/assets/games/join_button_hover-7a70b41e887ed2d2693935908cfdf899.jpg","https://cdn8.kizi.com/assets/games/login_button_hover-812d1fdca93da8c9f9fd91e53883fddc.jpg","https://cdn8.kizi.com/assets/popups/play_now_hover-6d27ed3f9abf3ac6bf2f7ce321f7d710.png","https://cdn8.kizi.com/assets/popups/add_friend_button_hover-f8d5e17d44d5e70a59ed2bde2e9f7004.png","https://cdn8.kizi.com/assets/social/notification_button_hover-1b8aea26b703bbf2efd8aec3c0ac6e47.png","https://cdn8.kizi.com/assets/popups/friend_center/friend_button_hover-81794eaf75e4dab7465ba9623495ca83.png","https://cdn8.kizi.com/assets/popups/x_blue_border-d9d52b17356a71e8debf3fb6fad9f88f.png"],n=[];$.each(e,function(e,t){var i=new Image;i.src=t,n.push(i)});var t=window.RequestFileSystem||window.webkitRequestFileSystem;t?t(window.TEMPORARY,100,function(){is_incognito=!1},function(){is_incognito=!0}):console.log("check failed?")}),$.fn.preload=function(){this.each(function(){$("<img/>")[0].src=this})};var house_banners_arr=[{link:"/games/goodgame-empire",alt:"Play Goodgame Empire on Kizi!",source:"house_bnr_1.jpg"},{link:"/games/c/fish-always-online",alt:"Play Fish Always OnLine on Kizi!",source:"house_bnr_2.jpg"},{link:"/games/goodgame-big-farm",alt:"Play Big Farm on Kizi!",source:"house_bnr_3.jpg"},{link:"//m.kizi.com/?utm_source=kizi&utm_medium=banner1&utm_campaign=house_ads",alt:"Kizi on your mobile!",source:"mobile_1.png"},{link:"//m.kizi.com/?utm_source=kizi&utm_medium=banner3&utm_campaign=house_ads",alt:"Kizi on your mobile!",source:"mobile_3.png"},{link:"//m.kizi.com/?utm_source=kizi&utm_medium=banner4&utm_campaign=house_ads",alt:"Kizi on your mobile!",source:"mobile_4.png"},{link:"//m.kizi.com/?utm_source=kizi&utm_medium=banner5&utm_campaign=house_ads",alt:"Kizi on your mobile!",source:"mobile_5.png"},{link:"//kizi.com/games/super-mechs",alt:"Play Supermechs on Kizi!",source:"Supermechs.png"},{link:"https://goo.gl/nGeRJH",alt:"Play Roblox on Kizi!",source:"roblox_banner.jpg"}],PlayerStats={VIDEO_ELAPSED_CHECK_INTERVAL_SECONDS:2,VIDEO_ELAPSED_MAX_VALUE:3600,video_duration:-1,video_elapsed_time:0,was_completed:!(RatingBox={jstorageKey:"ratingBox_status",jstorageVideoKey:"ratingVideoBox_status",jstorageLevelKey:"ratingLevelBox_status",jstorageData:null,jstorageVideoData:null,jstorageLevelData:null,ajaxBlock:!1,initialize:function(e,t,i,n){if("walkthrough"==n)var o=$(".video_rating_box"),r=video_id;else{if("video"==page_type)r=video_id;else if("level"==n)r=level_id;else r=game_id;o=$(".rating_box")}window.user_id?o.addClass(e):"video"==page_type||"walkthrough"==n?(RatingBox.jstorageVideoData=$.jStorage.get(RatingBox.jstorageVideoKey)||{},RatingBox.jstorageVideoData[r]&&o.addClass(RatingBox.jstorageVideoData[r])):"level"==n?(RatingBox.jstorageLevelData=$.jStorage.get(RatingBox.jstorageLevelKey)||{},RatingBox.jstorageLevelData[r]&&o.addClass(RatingBox.jstorageLevelData[r])):(RatingBox.jstorageData=$.jStorage.get(RatingBox.jstorageKey)||{},RatingBox.jstorageData[r]&&o.addClass(RatingBox.jstorageData[r])),RatingBox.drawStars(t,i,n)},rate:function(e,t){if("walkthrough"==t)var i=$(".video_rating_box"),n=video_id,o="/videos/"+video_permalink+"/video_rate";else{if("video"==page_type)n=video_id,o="/videos/"+video_permalink+"/video_rate";else if("level"==t)n=level_id,o="/game_levels/"+level_id+"/level_rate";else n=game_id,o="/games/"+game_permalink+"/rate";i=$(".rating_box")}if(!RatingBox.ajaxBlock&&!i.hasClass(e)){var r=null;i.hasClass("up")&&(r="up"),i.hasClass("down")&&(r="down"),RatingBox.ajaxBlock=!0,$.post(o,{rating:e,old_rating:r,rating_type:t},function(){i.removeClass("up").removeClass("down"),i.addClass(e),"video"==page_type||"walkthrough"==t?!window.user_id&&RatingBox.jstorageVideoData&&(RatingBox.jstorageVideoData[n]=e,$.jStorage.set(RatingBox.jstorageVideoKey,RatingBox.jstorageVideoData)):!window.user_id&&RatingBox.jstorageData&&(RatingBox.jstorageData[n]=e,$.jStorage.set(RatingBox.jstorageKey,RatingBox.jstorageData)),RatingBox.ajaxBlock=!1})}},drawSelected:function(e,t){if("walkthrough"==t)var i=$(".video_rating_box");else i=$(".rating_box");i.removeClass("up").removeClass("down"),"up"!=e&&"down"!=e||i.addClass(e)},drawStars:function(e,t,n){function o(e){if("walkthrough"==n)var t=$("<div class='video_star_container'/>");else t=$("<div class='star_container'/>");e%1==0?t.append($("<div/>",{"class":0<e?"star_on":"star_off"})):(t.append($("<div/>",{"class":"star_on"}).css({width:s%1*100+"%"})),t.append($("<div/>",{"class":"star_off half_star"}).css({width:100*(1-s%1)+"%"}))),r.append(t)}if("walkthrough"==n)var r=$(".video_rating_box .rating_stars");else r=$(".rating_box .rating_stars");var a=0;0<e+t&&(a=e/(e+t));var s=Math.ceil(10*a)/2;r.html("");var l=0;for(i=0;i<parseInt(s);i++)o(1),l++;for(s%1!=0&&(o(.5),l++),i=0;i<5-l;i++)o(-1);r.attr("title",e+" thumbs up out of "+(e+t))}}),video_time_updater:null,player_object:null,getDuration:function(){},getElapsedTime:function(){},playerReadyCallback:function(){var e=PlayerStats.getDuration();PlayerStats.video_duration<=0&&0<e&&(PlayerStats.video_duration=e),PlayerStats.video_time_updater=setInterval(PlayerStats.updateElapsedTime,1e3*PlayerStats.VIDEO_ELAPSED_CHECK_INTERVAL_SECONDS)},videoCompletedCallback:function(){PlayerStats.video_elapsed_time=PlayerStats.video_duration,PlayerStats.was_completed=!0,clearTimeout(PlayerStats.video_time_updater)},updateElapsedTime:function(){var e=PlayerStats.getElapsedTime();(!PlayerStats.was_completed&&e>PlayerStats.video_elapsed_time&&e<=PlayerStats.video_duration&&e<PlayerStats.VIDEO_ELAPSED_MAX_VALUE&&(PlayerStats.video_elapsed_time=e),PlayerStats.video_duration<=0)&&(0<PlayerStats.getDuration()&&(PlayerStats.video_duration=PlayerStats.getDuration()))}};LogoMotion={timer:null,speed:300,motionStart:function(e){clearTimeout(LogoMotion.timer),LogoMotion.timer=setTimeout(function(){e.stop(!0),LogoMotion.start(e)},200)},start:function(e){logo_new_top=0,logo_new_left=0,200<e.offset().left?(logo_new_top=0,logo_new_left=50):(logo_height=e.height(),logo_width=e.width(),logo_new_top=$(window).height()-logo_height-50,logo_new_left=$(window).width(
)-logo_width-50),e.animate({opacity:.5},LogoMotion.speed,function(){e.hide(),e.css({left:logo_new_left+"px",top:logo_new_top+"px"}).animate({opacity:1},LogoMotion.speed),e.show(),e.animate({opacity:1},LogoMotion.speed)})}};try{Array.prototype.includes||(Array.prototype.includes=function(e,t){"use strict";if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var i=Object(this),n=parseInt(i.length,10)||0;if(0===n)return!1;var o,r,a=parseInt(t,10)||0;for(0<=a?o=a:(o=n+a)<0&&(o=0);o<n;){if(e===(r=i[o])||e!=e&&r!=r)return!0;o++}return!1}),String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}}catch(e){console.log("Common.js Add includes method error:"+e.toString())}thumb_count=0,thumbs_loaded=0,banner_impressions=0,actual_banner_impressions=0,google_banner_impressions=0,google_actual_banner_impressions=0,dfp_events_arr=[],isUnloading=0,play_in_session=0,video_attempts=0,video_impressions=0,preroll_impressions=0,midroll_impressions=0,time_until_preroll=null,time_until_afg_fallback=null,time_until_game=null,time_until_video_attempt=null,time_until_ad_loaded=null,ad_tracked=!1,isOverGoogleAd=!1,ads_layout="none",single_skyscraper_mode="",abtest1Alt="none",abtest2Alt="none",abtest3Alt="none",abtest4Alt="none",abtest5Alt="none",ch_date_value="0_0",child_directed="false",videos_allowed=!1,is_paid_visit="false",new_minigames=!1,actual_banners_arr={},conversion_value="0",track_ad_impressions="/"+"track_ad_impressions".split("").reverse().join(""),track_ad_click="/"+"track_ad_click".split("").reverse().join(""),adblock_active=!0,roas_conversion_id="945781763";var google_conversion_labels=[];google_ads_types=[];last_counter_value=0,NotifcationUpdater={is_sidebar:!1,timeoutObj:null,timeout:12e4,start:function(e){clearInterval(NotifcationUpdater.timeoutObj),NotifcationUpdater.timeoutObj=setInterval(NotifcationUpdater.check,NotifcationUpdater.timeout),e&&(NotifcationUpdater.is_sidebar=!0)},stop:function(){clearInterval(NotifcationUpdater.timeoutObj)},check:function(){var e=$("#new_notifications_count").text()||0,t=$("#friend_requests_count").text()||0;$.ajax("/notifications/refresh_count",{type:"get",data:{count:e,friend_requests:t,page_type:window.page_type},dataType:"script"})}};var facebook_window,isBannerCreated=!(LastPlayed={list:null,init:function(e){void 0===e?e={fixed:!0,show_is_in_toggle_mode:!0,add_titles:!0}:("undefined"==typeof e.fixed&&(e.fixed=!0),"undefined"==typeof e.show_is_in_toggle_mode&&(e.show_is_in_toggle_mode=!0),"undefined"==typeof e.add_titles&&(e.add_titles=!0)),"sidebar_user_info_box"==window.page_type&&(e.open_above="true"),LastPlayed.list=new GamesList("last_played_icon",e)},open:function(e){LastPlayed.list||LastPlayed.init(e);var t=(readCookie("games_played_history")||"").split("|");t=$.map(t,function(e){return e||null});var i=(readCookie("videos_played_history")||"").split("|");i=$.map(i,function(e){return e||null}),LastPlayed.list.show(t.slice(-6).reverse(),i.slice(-5).reverse())}}),_oldhide=$.fn.hide,fbUserLoggedIn=!1,openingAddFriends=!1,StayOnKizi={thumbs_json:null,page_setup:function(){$(document).mouseleave(function(e){0<$("#stay_on_kizi").length&&e.clientY<0&&!readCookie("stay")&&"block"!=$("#colorbox").css("display")&&$.colorbox({inline:!0,href:"#stay_on_kizi",transition:"none",initialHeight:750,initialWidth:514,fixed:!0,onLoad:function(){createCookie("stay","1",1/24),$("#cboxClose").addClass("blue")},onClosed:function(){$("#cboxClose").removeClass("blue")}})})},render_thumbs:function(e){StayOnKizi.thumbs_json=e;var n=$("#stay_on_kizi_thumbs");$(StayOnKizi.thumbs_json.slice(0,9)).each(function(e,t){$("<img/>")[0].src=t.thumb;var i="'"+t.rel+"'";$('<a onclick="StayOnKizi.thumb_clicked('+i+');" >').attr("href",t.path).append($("<div class='stay_thumb'>").css({background:"url("+t.thumb+")",backgroundSize:"132px 132px"})).appendTo(n)})},thumb_clicked:function(e){var t=new Date;t.setTime(t.getTime()+6e4),document.cookie="stayonkizi_thumb="+encodeURI(e)+"; expires="+t.toGMTString()+"; path=/"}},Moodometer={thumbs_json:null,disabled:!1,page_setup:function(e){var i,n;"gamepage"==e?(n=60,eraseCookie(i="stay_with_moodometer_gamepage")):(n=1,i="stay_with_moodometer_homepage"),$(document).mouseleave(function(e){var t=((new Date).getTime()-page_load_timestamp)/1e3;0<$("#moodometer_wrapper").length&&e.clientY<0&&!readCookie(i)&&"block"!=$("#colorbox").css("display")&&n<t&&!Moodometer.disabled&&$.colorbox({inline:!0,href:"#moodometer_wrapper",transition:"none",className:"moodometer_colorbox",initialHeight:750,initialWidth:514,fixed:!0,onLoad:function(){hj("trigger","moodometer"),createCookie(i,"1",1)}})})},on_homepage_clicked:function(){0<$("#moodometer_wrapper").length&&"block"!=$("#colorbox").css("display")&&$.colorbox({inline:!0,href:"#moodometer_wrapper",transition:"none",className:"moodometer_colorbox",initialHeight:750,initialWidth:514,fixed:!0,onLoad:function(){hj("trigger","moodometer")}})},render_thumbs:function(e){Moodometer.thumbs_json=e;$("#moodometer_thumbs");$(Moodometer.thumbs_json.slice(0,5)).each(function(e,t){var i=$("<div/>",{id:"segment_"+e,"class":"segment",style:"display:none;"});i.appendTo("#moodometer_thumbs"),$(t).each(function(e,t){t.click_callback=function(){Moodometer.thumb_clicked(t.rel)},new TileGameThumb({el:$("<div/>",{"class":"moodometer_thumb"}).appendTo(i),game_hash:t})})})},thumb_clicked:function(e){var t=new Date;t.setTime(t.getTime()+6e4),document.cookie="moodometer_thumb="+encodeURI(e)+"; expires="+t.toGMTString()+"; path=/"}},refresh_user_box_blocked=!1;"undefined"!=typeof Backbone&&(TileVideoThumb=Backbone.View.extend({initialize:function(e){this.video_hash=e.video_hash,this.render()},render:function(){"thumb_dimension"in this.video_hash||(this.video_hash.thumb_dimension={width:parseInt(this.video_hash.thumb_width),height:parseInt(this.video_hash.thumb_height)});var e=this.video_hash.thumb_type==undefined?"":this.video_hash.thumb_type,t=this.video_hash.thumb_position==undefined?"":this.video_hash.thumb_position,i=0<parseInt(this.video_hash.duration)?setup_duration_element(parseInt(this.video_hash.duration)):"",n={title:this.video_hash.title,duration:i,thumb_class:this.video_hash.thumb_class,video_path:this.video_hash.path,new_video_class:this.video_hash["new"]?"new_video":"",rel:this.video_hash.rel+"|"+this.video_hash.rel_id+"|"+this.video_hash.page+"|"+e+"|"+t,new_ribbon_img:this.video_hash["new"]?"<img style='width:"+.5*this.video_hash.thumb_dimension.height+"px;height:"+.5*this.video_hash.thumb_dimension.height+"px' src="+this.getNewRibbonPath+" class='new_ribbon'/>":"",play_icon_img:"<img src='https://cdn8.kizi.com/assets/collections/iconPlay-0644b12db4c2a1014163882ec79421b7.png' class='play_icon_on_catalog_thumb' style='top:"+(this.video_hash.thumb_dimension.height/2-20)+"px;left:"+(this.video_hash.thumb_dimension.width/2-20)+"px;display:none;'/>",thumb_src:this.video_hash.thumb,video_hash:this.video_hash.path,wrapper_style:"width:"+this.video_hash.thumb_dimension.width+"px;height:"+this.video_hash.thumb_dimension.height+"px;background:"+(this.video_hash.background||"#000000"),thumb_style:"width:auto;height:"+this.video_hash.thumb_dimension.height+"px;",thumb_width:this.video_hash.thumb_dimension.width+"px;",thumb_height:this.video_hash.thumb_dimension.height+"px;",optional_thumb_params:"",optional_link_params:""},o=_.template($("#tile_thumb_template").html());$(this.el).html(o(n))},getNewRibbonPath:"https://cdn8.kizi.com/assets/common/new_ribbon_new_img-69cacfca2a3c970477aa01146098ee1b.png",getCoinsPath:"https://cdn8.kizi.com/assets/collections/coins_new-57fd8099557e00ffbf32832eedfed910.png",events:{"mouseenter .thumb_overlay":function(e){VideoCard.eventShow.call(e.currentTarget)},"mouseleave .thumb_overlay":function(e){VideoCard.hide.call(e.currentTarget)},"click .thumb_overlay":function(e){VideoCard.cancelLoad.call(e.currentTarget)},"click .thumb":function(e){handleClick.call(e.currentTarget)}}})),VideoCard={timer:null,thumb_timer:null,iframeOverlay:null,eventShow:function(){var e=$(this);clearTimeout(VideoCard.timer),VideoCard.timer=setTimeout(function(){VideoCard.show(e)},200)},show:function(e){e=$(e),VideoCard.hide_all();var t=e.closest(".thumb"),i={height:t.outerHeight(),width:t.outerWidth()},n=$("<div/>",{"class":"card_overlay card_wrapper"}).css({width:i.width+"px",height:i.height+"px",position:"absolute",overflow:"hidden",left:0,top:0}),o=$("<div/>",{"class":"card_overlay moving_part"}).css({width:i.width+"px",height:i.width+"px",opacity:.7,backgroundColor:"#000000",position:"absolute",left:"0px",top:0,zIndex:6,top:i.height+"px"}),r=$("<div/>",{"class":"card_overlay moving_part"}).css({width:i.width+"px",height:i.height+"px",position:"absolute",left:"0px",top:0,zIndex:7,top:i.height+"px"}),a=$("<div/>",{"class":"video_card_yellow_text kizi_font"}).css({textAlign:"center",fontSize:.13*i.height+"px",paddingTop:.04*i.height+"px"}).html(t.attr("name"));r.append(a),n.append(o),n.append(r),t.append(n),t.find(".moving_part").stop(!0);var s=i.height-.08*i.height-a.height();t.find(".moving_part").animate({top:s+"px"},{duration:400,easing:"easeOutCubic"})},hide:function(e){var t=e||$(this),i=t.closest(".thumb").find(".moving_part");i.stop(!0),i.animate({top:t.height()+"px"},{duration:150,easing:"easeOutCubic",complete:function(){i.parent().remove()}}),clearTimeout(VideoCard.timer)},hide_all:function(){$(".card_wrapper").each(function(e,t){VideoCard.hide($(t))})},cancelLoad:function(){$(".card_overlay").remove(),clearTimeout(VideoCard.timer)}},RateObject.prototype.calcRating=function(e,t){var i=+(e=e||this.thumbs_up)+ +(t=t||this.thumbs_down);return i<0?1:Math.round(e/i*5,1)},RateObject.prototype.rate=function(t,i){var e=this,n=page_type||"";$.post(this.rate_url,{page_type:n,rating:t,old_rating:e.saved_rating,rating_type:"thumbs",rating_object:"new",current_stars:e.calcRating()}).done(function(e){i.setRating(e.thumbs_up,e.thumbs_down,t)}).fail(function(e){console.log("Something went wrong",e)})};var pread_spinner,videoAdTimeout,logo_animation_interval_id=null,logo_animation_retries=0,KiziUtils=(time_until_preroll=null,function(){function i(){var e=!1;return navigator.mimeTypes&&navigator.mimeTypes["application/vnd.unity"]&&navigator.mimeTypes["application/vnd.unity"].enabledPlugin&&navigator.plugins&&navigator.plugins["Unity Player"]&&(e=!0),e}function t(e){if("function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]),!e)return!1;var t=e.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}return{isElementInViewport:t,country_allowed:function(e,t){if(!e.countries)return!0;var i=e.countries.split(",");return"!"===i[0]?-1===i.indexOf(t):-1!==i.indexOf(t)},allow_unity:function(){return+(i()||-1===navigator.userAgent.toLowerCase().indexOf("chrome"))},unity_supported:function(e){if(!e)return!1;var t=Array.isArray(e)?e[5]:e.unity;Array.isArray(e)?e[0]:e.name;return!t||(i()||-1===navigator.userAgent.toLowerCase().indexOf("chrome"))},webgl_detect:function(t){if(window.WebGLRenderingContext){for(var i=document.createElement("canvas"),n=["webgl","experimental-webgl","moz-webgl","webkit-3d"],o=!1,r=0;r<4;r++)try{if((o=i.getContext(n[r]))&&"function"==typeof o.getParameter)return!t||{name:n[r],gl:o}}catch(e){}return!1}return!1},webgl_supported:function(e){return!!e}}}()),SIMILAR_GAME_THUMB_HEIGHT=82,last_ingame_ad_timestamp=null,gAdSettings=(logo_animation_interval_id=null,logo_animation_retries=0,{}),preroll_is_done=!1,GameLayoutHelper=function GameLayoutHelper(e,t,i,n,o,r,a){var s=20,l=r?this.active_ad_block_config:this.side_banners_config;t-=s;for(var d=n?Math.max(i*e,n):i*e,u=0;l[u].required_width_for_sides+2*o.min>t-d&&u<l.length-1;)u++;var c=l[u];this.log("selected layout: "+JSON.stringify(c));var h=Math.min(i,t-c.required_width_for_sides-2*o.min);h=Math.max(h,d),this.log("game_final_width: "+h+"px");var _=Math.floor((t-c.required_width_for_sides-h)/2);_=Math.min(_,o.max),_=Math.max(_,o.min),this.log("final_padding: "+_),this.active_layout=c,this.game_final_width=h,this.final_padding=_,this.has_walkthrough=a,this.all_banners=this.active_layout.side_banners.concat(this.has_walkthrough?this.active_layout.page_banners.with_walkthrough:this.active_layout.page_banners.no_walkthrough),this.matomy_changes_applied=!1};GameLayoutHelper.prototype={side_banners_config:[{name:"left_160_right_160",required_width_for_sides:620,banners_next_to_game:2,left:160,right:160,left_similar:!0,right_similar:!0,walkthrough_layout:"left_300_right_300_horizontal_similars",side_banners:["160x600_ATF-Left","160x600_ATF-Right"],page_banners:{with_walkthrough:["728x90_ATF-Mid","300x250_BTF-Left","300x250_BTF-Right"],no_walkthrough:["728x90_ATF-Mid","970x250_BTF-Mid"]}},{name:"left_160_right_120",required_width_for_sides:580,banners_next_to_game:2,left:160,right:120,left_similar:!0,right_similar:!0,walkthrough_layout:"left_300_right_300_horizontal_similars",side_banners:["160x600_ATF-Left","120x600_ATF-Right"],page_banners:{with_walkthrough:["728x90_ATF-Mid","300x250_BTF-Left","300x250_BTF-Right"],no_walkthrough:["728x90_ATF-Mid","970x250_BTF-Mid"]}},{name:"left_120_right_120",required_width_for_sides:540,banners_next_to_game:2,left:120,right:120,left_similar:!0,right_similar:!0,walkthrough_layout:"left_300_right_300_horizontal_similars",side_banners:["120x600_ATF-Left","120x600_ATF-Right"],page_banners:{with_walkthrough:["728x90_ATF-Mid","300x250_BTF-Left","300x250_BTF-Right"],no_walkthrough:["728x90_ATF-Mid","970x250_BTF-Mid"]}},{name:"only_left_160",required_width_for_sides:310,banners_next_to_game:1,left:160,right:0,left_similar:!0,right_similar:!1,walkthrough_layout:"left_160_vertical_similars",side_banners:["160x600_ATF-Left"],page_banners:{with_walkthrough:["728x90_ATF-Mid","160x600_BTF-Left","970x250_BTF-Mid"],no_walkthrough:["728x90_ATF-Mid","300x250_BTF-Left","300x250_BTF-Right"]}},{name:"only_left_120",required_width_for_sides:270,banners_next_to_game:1,left:120,right:0,left_similar:!0,right_similar:!1,walkthrough_layout:"left_120_vertical_similars",side_banners:["120x600_ATF-Left"],page_banners:{with_walkthrough:["728x90_ATF-Mid","120x600_BTF-Left","970x250_BTF-Mid"],no_walkthrough:["728x90_ATF-Mid","300x250_BTF-Left","300x250_BTF-Right"]}},{name:"only_left_similar",required_width_for_sides:150,banners_next_to_game:0,left:0,right:0,left_similar:!0,right_similar:!1,walkthrough_layout:"left_120_right_120_no_similar",side_banners:[],page_banners:{with_walkthrough:["728x90_ATF-Mid","120x600_BTF-Left","120x600_BTF-Right","970x250_BTF-Mid"],no_walkthrough:["300x250_ATF-Left","300x250_ATF-Right","300x250_BTF-Left","300x250_BTF-Right"]}},{name:"only_bottom_similar",required_width_for_sides:0,banners_next_to_game:0,left:0,right:0,left_similar:!1,right_similar:!1,bottom_similar:!0,walkthrough_layout:"left_120_right_120_no_similar",side_banners:[],page_banners:{with_walkthrough:["728x90_ATF-Mid","120x600_BTF-Left","120x600_BTF-Right","970x250_BTF-Mid"],no_walkthrough:["300x250_ATF-Left","300x250_ATF-Right","300x250_BTF-Left","300x250_BTF-Right"]}},{name:"no_banners",required_width_for_sides:0,banners_next_to_game:0,left:0,right:0,left_similar:!1,right_similar:!1,bottom_similar:!1,walkthrough_layout:[],side_banners:[],page_banners:{with_walkthrough:[],no_walkthrough:[]}}],active_ad_block_config:[{name:"left_similar_right_similar",required_width_for_sides:300,banners_next_to_game:0,left:0,right:0,left_similar:!0,right_similar:!0,walkthrough_layout:"only_video",side_banners:[],page_banners:{with_walkthrough:[],no_walkthrough:[]}},{name:"only_left_similar",required_width_for_sides:150,banners_next_to_game:0,left:0,right:0,left_similar:!0,right_similar:!1,walkthrough_layout:"only_video",side_banners:[],page_banners:{with_walkthrough:[],no_walkthrough:[]}},{name:"no_similar",required_width_for_sides:0,banners_next_to_game:0,left:0,right:0,left_similar:!1,right_similar:!1,walkthrough_layout:"only_video",side_banners:[],page_banners:{with_walkthrough:[],no_walkthrough:[]}},{name:"no_banners",required_width_for_sides:0,banners_next_to_game:0,left:0,right:0,left_similar:!1,right_similar:!1,walkthrough_layout:"false",side_banners:[],page_banners:{with_walkthrough:[],no_walkthrough:[]}}],ad_units_version:"1",get_layout_specific_ad_unit_name:function(e,t){return t?"HB_Kizi_"+e:"Kizi_"+e+"_v1"},extract_ad_size:function(e){var t=e.split("_")[0];return[parseInt(t.split("x")[0]),parseInt(t.split("x")[1])]},get_ad_div_id:function(e){return"div-gpt-ad-"+e.replace("Yandex_","")},apply_special_layout_conditions:function(e,t,i){function n(e){var t=e.indexOf("970x250_BTF-Mid");-1!=t&&(e.splice(t,1,"300x250_BTF-Left","300x250_BTF-Right"),r=!0)}function o(e){var t=e.indexOf("728x90_ATF-Mid");-1!=t&&(e[t]="728x90_ATF-Mid_ADX")}if(-1<["AU","CA","UK","IE","US","FR"].indexOf(t)){var r=!1;n(i?e.page_banners.with_walkthrough:e.page_banners.no_walkthrough),e.matomy_changes_applied=r}return-1<["AU","NZ"].indexOf(t)&&o(i?e.page_banners.with_walkthrough:e.page_banners.no_walkthrough),e},log:function(){}},$(window).on("load",function(){var e=$(".recent_game_placeholder");e!=undefined&&0!=e.length&&window.disable_recent_games_animation});var DAILYMOTION_VIDEO_PARAMS={logo:0,autoplay:1,info:1,hideInfos:1,syndication:234987,related:0,start:0},VideoLayoutHelper=function VideoLayoutHelper(e,t,i,n){var o=20,r=n?this.active_ad_block_config:this.side_banners_config;e-=o;for(var a=Math.min(t,720),s=0;r[s].required_width_for_sides+2*i.min>e-a&&s<r.length-1;)s++;var l=r[s];this.log("selected layout: "+JSON.stringify(l));var d=Math.min(t,e-l.required_width_for_sides-2*i.min);d=Math.max(d,a),this.log("video_final_width: "+d+"px");var u=Math.floor((e-l.required_width_for_sides-d)/2);u=Math.min(u,i.max),u=Math.max(u,i.min),this.log("final_padding: "+u),this.active_layout=l,this.video_final_width=d,this.final_padding=u,this.all_banners=this.active_layout.side_banners.concat(this.active_layout.page_banners),this.matomy_changes_applied=!1};VideoLayoutHelper.prototype={side_banners_config:[{name:"left_160_right_160",required_width_for_sides:620,left:160,right:160,left_similar:!0,right_similar:!0,side_banners:["160x600_ATF-Left","160x600_ATF-Right"],page_banners:["728x90_ATF-Mid","300x250_BTF-Left","300x250_BTF-Right"]},{name:"left_160_right_160_single_similar",required_width_for_sides:490,left:160,right:160,left_similar:!1,right_similar:!0,side_banners:["160x600_ATF-Left","160x600_ATF-Right"],page_banners:["728x90_ATF-Mid","300x250_BTF-Left","300x250_BTF-Right"]},{name:"left_160_right_120_single_similar",required_width_for_sides:450,left:160,right:120,left_similar:!1,right_similar:!0,side_banners:["160x600_ATF-Left","120x600_ATF-Right"],page_banners:["728x90_ATF-Mid","300x250_BTF-Left","300x250_BTF-Right"]},{name:"left_160_single_similar",required_width_for_sides:330,left:160,right:0,left_similar:!1,right_similar:!0,side_banners:["160x600_ATF-Left"],page_banners:["728x90_ATF-Mid","300x250_BTF-Left","300x250_BTF-Right"]},{name:"left_120_single_similar",required_width_for_sides:290,left:120,right:0,left_similar:!1,right_similar:!0,side_banners:["120x600_ATF-Left"],page_banners:["728x90_ATF-Mid","300x250_BTF-Left","300x250_BTF-Right"]}],active_ad_block_config:[{name:"left_similar_right_similar",required_width_for_sides:300,left:0,right:0,left_similar:!0,right_similar:!0,side_banners:[],page_banners:[]}],get_layout_specific_ad_unit_name:function(e,t){return t?"HB_Kizi_"+e:"Kizi_"+e+"_v1"},extract_ad_size:function(e){var t=e.split("_")[0];return[parseInt(t.split("x")[0]),parseInt(t.split("x")[1])]},get_ad_div_id:function(e){return"div-gpt-ad-"+e.replace("Yandex_","")},apply_special_layout_conditions:function(e,t,i){function n(e){var t=e.indexOf("728x90_ATF-Mid");-1!=t&&(e[t]="728x90_ATF-Mid_ADX")}return-1<["AU","NZ"].indexOf(t)&&n(i?e.page_banners.with_walkthrough:e.page_banners.no_walkthrough),e},log:function(){}},
/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 *
 * Open source under the BSD License.
 *
 * Copyright 2008 George McGinley Smith
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list
 * of conditions and the following disclaimer in the documentation and/or other materials
 * provided with the distribution.
 *
 * Neither the name of the author nor the names of contributors may be used to endorse
 * or promote products derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 * COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 * GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */
$.easing.jswing=$.easing.swing,$.extend($.easing,{def:"easeOutQuad",swing:function(e,t,i,n,o){return $.easing[$.easing.def](e,t,i,n,o)},easeInQuad:function(e,t,i,n,o){return n*(t/=o)*t+i},easeOutQuad:function(e,t,i,n,o){return-n*(t/=o)*(t-2)+i},easeInOutQuad:function(e,t,i,n,o){return(t/=o/2)<1?n/2*t*t+i:-n/2*(--t*(t-2)-1)+i},easeInCubic:function(e,t,i,n,o){return n*(t/=o)*t*t+i},easeOutCubic:function(e,t,i,n,o){return n*((t=t/o-1)*t*t+1)+i},easeInOutCubic:function(e,t,i,n,o){return(t/=o/2)<1?n/2*t*t*t+i:n/2*((t-=2)*t*t+2)+i},easeInQuart:function(e,t,i,n,o){return n*(t/=o)*t*t*t+i},easeOutQuart:function(e,t,i,n,o){return-n*((t=t/o-1)*t*t*t-1)+i},easeInOutQuart:function(e,t,i,n,o){return(t/=o/2)<1?n/2*t*t*t*t+i:-n/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(e,t,i,n,o){return n*(t/=o)*t*t*t*t+i},easeOutQuint:function(e,t,i,n,o){return n*((t=t/o-1)*t*t*t*t+1)+i},easeInOutQuint:function(e,t,i,n,o){return(t/=o/2)<1?n/2*t*t*t*t*t+i:n/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(e,t,i,n,o){return-n*Math.cos(t/o*(Math.PI/2))+n+i},easeOutSine:function(e,t,i,n,o){return n*Math.sin(t/o*(Math.PI/2))+i},easeInOutSine:function(e,t,i,n,o){return-n/2*(Math.cos(Math.PI*t/o)-1)+i},easeInExpo:function(e,t,i,n,o){return 0==t?i:n*Math.pow(2,10*(t/o-1))+i},easeOutExpo:function(e,t,i,n,o){return t==o?i+n:n*(1-Math.pow(2,-10*t/o))+i},easeInOutExpo:function(e,t,i,n,o){return 0==t?i:t==o?i+n:(t/=o/2)<1?n/2*Math.pow(2,10*(t-1))+i:n/2*(2-Math.pow(2,-10*--t))+i},easeInCirc:function(e,t,i,n,o){return-n*(Math.sqrt(1-(t/=o)*t)-1)+i},easeOutCirc:function(e,t,i,n,o){return n*Math.sqrt(1-(t=t/o-1)*t)+i},easeInOutCirc:function(e,t,i,n,o){return(t/=o/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+i:n/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(e,t,i,n,o){var r=1.70158,a=0,s=n;if(0==t)return i;if(1==(t/=o))return i+n;if(a||(a=.3*o),s<Math.abs(n)){s=n;r=a/4}else r=a/(2*Math.PI)*Math.asin(n/s);return-s*Math.pow(2,10*(t-=1))*Math.sin((t*o-r)*(2*Math.PI)/a)+i},easeOutElastic:function(e,t,i,n,o){var r=1.70158,a=0,s=n;if(0==t)return i;if(1==(t/=o))return i+n;if(a||(a=.3*o),s<Math.abs(n)){s=n;r=a/4}else r=a/(2*Math.PI)*Math.asin(n/s);return s*Math.pow(2,-10*t)*Math.sin((t*o-r)*(2*Math.PI)/a)+n+i},easeInOutElastic:function(e,t,i,n,o){var r=1.70158,a=0,s=n;if(0==t)return i;if(2==(t/=o/2))return i+n;if(a||(a=o*(.3*1.5)),s<Math.abs(n)){s=n;r=a/4}else r=a/(2*Math.PI)*Math.asin(n/s);return t<1?s*Math.pow(2,10*(t-=1))*Math.sin((t*o-r)*(2*Math.PI)/a)*-.5+i:s*Math.pow(2,-10*(t-=1))*Math.sin((t*o-r)*(2*Math.PI)/a)*.5+n+i},easeInBack:function(e,t,i,n,o,r){return r==undefined&&(r=1.70158),n*(t/=o)*t*((r+1)*t-r)+i},easeOutBack:function(e,t,i,n,o,r){return r==undefined&&(r=1.70158),n*((t=t/o-1)*t*((r+1)*t+r)+1)+i},easeInOutBack:function(e,t,i,n,o,r){return r==undefined&&(r=1.70158),(t/=o/2)<1?n/2*(t*t*((1+(r*=1.525))*t-r))+i:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+i},easeInBounce:function(e,t,i,n,o){return n-$.easing.easeOutBounce(e,o-t,0,n,o)+i},easeOutBounce:function(e,t,i,n,o){return(t/=o)<1/2.75?n*(7.5625*t*t)+i:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+i:n*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(e,t,i,n,o){return t<o/2?.5*$.easing.easeInBounce(e,2*t,0,n,o)+i:.5*$.easing.easeOutBounce(e,2*t-o,0,n,o)+.5*n+i}}),jQuery.fn.present=function(){return 0<this.length},jQuery.fn.not_present=function(){return 0==this.length},jQuery.fn.last=function(){return this[this.length-1]},Number.prototype.number_with_delimiter=function(e){e=e||",";var t=(this+"").split(".");return t[0]=t[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+e),t.join(".")},Array.prototype.first=function(){return this[0]};var slideoutEl,VD=function(e,t){function i(){return+s}function n(e){if("visible"===document.visibilityState&&t.isElementInViewport(o))return(e=e.player_object||null)?player_type&&"dailymotion"==player_type?(a+=i(e),!0):void 0:(a+=1,!0)}var o=e("#video_box"),r=null,a=0,s=!1;return{startDurationCount:function(e){r||(r=setInterval(n.bind(null,e),1e3))},stopDurationCount:function(){clearInterval(r)},setIsPlaying:function(e){s=e},getRealDuration:function(){return a}}}($,KiziUtils);
/*!
 * Masonry PACKAGED v3.3.0
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */-1!=navigator.appVersion.indexOf("MSIE 7.")||-1!=navigator.appVersion.indexOf("MSIE 6.")?$.fn.masonry=function(){}:(function(e){function t(){}function i(d){function i(e){e.prototype.option||(e.prototype.option=function(e){d.isPlainObject(e)&&(this.options=d.extend(!0,this.options,e))})}function n(s,l){d.fn[s]=function(t){if("string"!=typeof t)return this.each(function(){var e=d.data(this,s);e?(e.option(t),e._init()):(e=new l(this,t),d.data(this,s,e))});for(var e=c.call(arguments,1),i=0,n=this.length;i<n;i++){var o=this[i],r=d.data(o,s);if(r)if(d.isFunction(r[t])&&"_"!==t.charAt(0)){var a=r[t].apply(r,e);if(a!==undefined)return a}else u("no such method '"+t+"' for "+s+" instance");else u("cannot call methods on "+s+" prior to initialization; attempted to call '"+t+"'")}return this}}if(d){var u="undefined"==typeof console?t:function(e){console.error(e)};return d.bridget=function(e,t){i(t),n(e,t)},d.bridget}}var c=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],i):"object"==typeof exports?i(require("jquery")):i(e.jQuery)}(window),
/*!
     * eventie v1.0.6
     * event binding helper
     *   eventie.bind( elem, 'click', myFn )
     *   eventie.unbind( elem, 'click', myFn )
     * MIT license
     */
function(i){function n(e){var t=i.event;return t.target=t.target||t.srcElement||e,t}var e=document.documentElement,t=function(){};e.addEventListener?t=function(e,t,i){e.addEventListener(t,i,!1)}:e.attachEvent&&(t=function(t,e,i){t[e+i]=i.handleEvent?function(){var e=n(t);i.handleEvent.call(i,e)}:function(){var e=n(t);i.call(t,e)},t.attachEvent("on"+e,t[e+i])});var o=function(){};e.removeEventListener?o=function(e,t,i){e.removeEventListener(t,i,!1)}:e.detachEvent&&(o=function(e,t,i){e.detachEvent("on"+t,e[t+i]);try{delete e[t+i]}catch(n){e[t+i]=undefined}});var r={bind:t,unbind:o};"function"==typeof define&&define.amd?define("eventie/eventie",r):"object"==typeof exports?module.exports=r:i.eventie=r}(window),function(){function e(){}function r(e,t){for(var i=e.length;i--;)if(e[i].listener===t)return i;return-1}function t(e){return function t(){return this[e].apply(this,arguments)}}var i=e.prototype,n=this,o=n.EventEmitter;i.getListeners=function a(e){var t,i,n=this._getEvents();if(e instanceof RegExp)for(i in t={},n)n.hasOwnProperty(i)&&e.test(i)&&(t[i]=n[i]);else t=n[e]||(n[e]=[]);return t},i.flattenListeners=function s(e){var t,i=[];for(t=0;t<e.length;t+=1)i.push(e[t].listener);return i},i.getListenersAsObject=function l(e){var t,i=this.getListeners(e);return i instanceof Array&&((t={})[e]=i),t||i},i.addListener=function d(e,t){var i,n=this.getListenersAsObject(e),o="object"==typeof t;for(i in n)n.hasOwnProperty(i)&&-1===r(n[i],t)&&n[i].push(o?t:{listener:t,once:!1});return this},i.on=t("addListener"),i.addOnceListener=function u(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=t("addOnceListener"),i.defineEvent=function c(e){return this.getListeners(e),this},i.defineEvents=function h(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function _(e,t){var i,n,o=this.getListenersAsObject(e);for(n in o)o.hasOwnProperty(n)&&-1!==(i=r(o[n],t))&&o[n].splice(i,1);return this},i.off=t("removeListener"),i.addListeners=function p(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function f(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function m(e,t,i){var n,o,r=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(n=i.length;n--;)r.call(this,t,i[n]);else for(n in t)t.hasOwnProperty(n)&&(o=t[n])&&("function"==typeof o?r.call(this,n,o):a.call(this,n,o));return this},i.removeEvent=function g(e){var t,i=typeof e,n=this._getEvents();if("string"===i)delete n[e];else if(e instanceof RegExp)for(t in n)n.hasOwnProperty(t)&&e.test(t)&&delete n[t];else delete this._events;return this},i.removeAllListeners=t("removeEvent"),i.emitEvent=function v(e,t){var i,n,o,r=this.getListenersAsObject(e);for(o in r)if(r.hasOwnProperty(o))for(n=r[o].length;n--;)!0===(i=r[o][n]).once&&this.removeListener(e,i.listener),i.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},i.trigger=t("emitEvent"),i.emit=function y(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function b(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function w(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function x(){return this._events||(this._events={})},e.noConflict=function k(){return n.EventEmitter=o,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:n.EventEmitter=e}.call(this),
/*!
     * getStyleProperty v1.0.4
     * original by kangax
     * http://perfectionkills.com/feature-testing-css-properties/
     * MIT license
     */
function(e){function t(e){if(e){if("string"==typeof r[e])return e;var t;e=e.charAt(0).toUpperCase()+e.slice(1);for(var i=0,n=o.length;i<n;i++)if(t=o[i]+e,"string"==typeof r[t])return t}}var o="Webkit Moz ms Ms O".split(" "),r=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return t}):"object"==typeof exports?module.exports=t:e.getStyleProperty=t}(window),
/*!
     * getSize v1.2.2
     * measure size of elements
     * MIT license
     */
function(l){function k(e){var t=parseFloat(e);return-1===e.indexOf("%")&&!isNaN(t)&&t}function e(){}function $(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0,i=T.length;t<i;t++){e[T[t]]=0}return e}function t(a){function v(){if(!s){s=!0;var i,t=l.getComputedStyle;if(i=t?function(e){return t(e,null)}:function(e){return e.currentStyle},b=function r(e){var t=i(e);return t||d("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),t},w=a("boxSizing")){var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style[w]="border-box";var n=document.body||document.documentElement;n.appendChild(e);var o=b(e);x=200===k(o.width),n.removeChild(e)}}}function e(e){if(v(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var t=b(e);if("none"===t.display)return $();var i={};i.width=e.offsetWidth,i.height=e.offsetHeight;for(var n=i.isBorderBox=!(!w||!t[w]||"border-box"!==t[w]),o=0,r=T.length;o<r;o++){var a=T[o],s=t[a];s=y(e,s);var l=parseFloat(s);i[a]=isNaN(l)?0:l}var d=i.paddingLeft+i.paddingRight,u=i.paddingTop+i.paddingBottom,c=i.marginLeft+i.marginRight,h=i.marginTop+i.marginBottom,_=i.borderLeftWidth+i.borderRightWidth,p=i.borderTopWidth+i.borderBottomWidth,f=n&&x,m=k(t.width);!1!==m&&(i.width=m+(f?0:d+_));var g=k(t.height);return!1!==g&&(i.height=g+(f?0:u+p)),i.innerWidth=i.width-(d+_),i.innerHeight=i.height-(u+p),i.outerWidth=i.width+c,i.outerHeight=i.height+h,i}}function y(e,t){if(l.getComputedStyle||-1===t.indexOf("%"))return t;var i=e.style,n=i.left,o=e.runtimeStyle,r=o&&o.left;return r&&(o.left=e.currentStyle.left),i.left=t,t=i.pixelLeft,i.left=n,r&&(o.left=r),t}var b,w,x,s=!1;return e}var d="undefined"==typeof console?e:function(e){console.error(e)},T=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],t):"object"==typeof exports?module.exports=t(require("desandro-get-style-property")):l.getSize=t(l.getStyleProperty)}(window),
/*!
     * docReady v1.0.4
     * Cross browser DOMContentLoaded event emitter
     * MIT license
     */
function(t){function i(e){"function"==typeof e&&(i.isReady?e():a.push(e))}function n(e){var t="readystatechange"===e.type&&"complete"!==r.readyState;i.isReady||t||o()}function o(){i.isReady=!0;for(var e=0,t=a.length;e<t;e++){(0,a[e])()}}function e(e){return"complete"===r.readyState?o():(e.bind(r,"DOMContentLoaded",n),e.bind(r,"readystatechange",n),e.bind(t,"load",n)),i}var r=t.document,a=[];i.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],e):"object"==typeof exports?module.exports=e(require("eventie")):t.docReady=e(t.eventie)}(window),function(o){function i(e,t){return e[a](t)}function r(e){e.parentNode||document.createDocumentFragment().appendChild(e)}function e(e,t){r(e);for(var i=e.parentNode.querySelectorAll(t),n=0,o=i.length;n<o;n++)if(i[n]===e)return!0;return!1}function t(e,t){return r(e),i(e,t)}var n,a=function(){if(o.matches)return"matches";if(o.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],t=0,i=e.length;t<i;t++){var n=e[t]+"MatchesSelector";if(o[n])return n}}();if(a){var s=i(document.createElement("div"),"div");n=s?i:t}else n=e;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return n}):"object"==typeof exports?module.exports=n:window.matchesSelector=n}(Element.prototype),function(i,n){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["doc-ready/doc-ready","matches-selector/matches-selector"],function(e,t){return n(i,e,t)}):"object"==typeof exports?module.exports=n(i,require("doc-ready"),require("desandro-matches-selector")):i.fizzyUIUtils=n(i,i.docReady,i.matchesSelector)}(window,function factory(_,e,d){var p={extend:function(e,t){for(var i in t)e[i]=t[i];return e},modulo:function(e,t){return(e%t+t)%t}},t=Object.prototype.toString;p.isArray=function(e){return"[object Array]"==t.call(e)},p.makeArray=function(e){var t=[];if(p.isArray(e))t=e;else if(e&&"number"==typeof e.length)for(var i=0,n=e.length;i<n;i++)t.push(e[i]);else t.push(e);return t},p.indexOf=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},p.removeFrom=function(e,t){var i=p.indexOf(e,t);-1!=i&&e.splice(i,1)},p.isElement="function"==typeof HTMLElement||"object"==typeof HTMLElement?function i(e){return e instanceof HTMLElement}:function n(e){return e&&"object"==typeof e&&1==e.nodeType&&"string"==typeof e.nodeName},p.setText=function(){function e(e,t){e[i=i||(document.documentElement.textContent!==undefined?"textContent":"innerText")]=t}var i;return e}(),p.getParent=function(e,t){for(;e!=document.body;)if(e=e.parentNode,d(e,t))return e},p.getQueryElement=function(e){return"string"==typeof e?document.querySelector(e):e},p.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},p.filterFindElements=function(e,t){for(var i=[],n=0,o=(e=p.makeArray(e)).length;n<o;n++){var r=e[n];if(p.isElement(r))if(t){d(r,t)&&i.push(r);for(var a=r.querySelectorAll(t),s=0,l=a.length;s<l;s++)i.push(a[s])}else i.push(r)}return i},p.debounceMethod=function(e,t,n){var o=e.prototype[t],r=t+"Timeout";e.prototype[t]=function(){var e=this[r];e&&clearTimeout(e);var t=arguments,i=this;this[r]=setTimeout(function(){o.apply(i,t),delete i[r]},n||100)}},p.toDashed=function(e){return e.replace(/(.)([A-Z])/g,function(e,t,i){return t+"-"+i}).toLowerCase()};var f=_.console;return p.htmlInit=function(c,h){e(function(){for(var e=p.toDashed(h),t=document.querySelectorAll(".js-"+e),i="data-"+e+"-options",n=0,o=t.length;n<o;n++){var r,a=t[n],s=a.getAttribute(i);try{r=s&&JSON.parse(s)}catch(u){f&&f.error("Error parsing "+i+" on "+a.nodeName.toLowerCase()+(a.id?"#"+a.id:"")+": "+u);continue}var l=new c(a,r),d=_.jQuery;d&&d.data(a,h,l)}})},p}),function(o,r){"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property","fizzy-ui-utils/utils"],function(e,t,i,n){return r(o,e,t,i,n)}):"object"==typeof exports?module.exports=r(o,require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property"),require("fizzy-ui-utils")):(o.Outlayer={},o.Outlayer.Item=r(o,o.EventEmitter,o.getSize,o.getStyleProperty,o.fizzyUIUtils))}(window,function factory(e,t,i,r,n){function o(e){for(var t in e)return!1;return!null}function a(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}var s=e.getComputedStyle,l=s?function(e){return s(e,null)}:function(e){return e.currentStyle},d=r("transition"),u=r("transform"),c=d&&u,h=!!r("perspective"),_={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[d],p=["transform","transition","transitionDuration","transitionProperty"],f=function(){for(var e={},t=0,i=p.length;t<i;t++){var n=p[t],o=r(n);o&&o!==n&&(e[n]=o)}return e}();n.extend(a.prototype,t.prototype),a.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},a.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},a.prototype.getSize=function(){this.size=i(this.element)},a.prototype.css=function(e){var t=this.element.style;for(var i in e){t[f[i]||i]=e[i]}},a.prototype.getPosition=function(){var e=l(this.element),t=this.layout.options,i=t.isOriginLeft,n=t.isOriginTop,o=parseInt(e[i?"left":"right"],10),r=parseInt(e[n?"top":"bottom"],10);o=isNaN(o)?0:o,r=isNaN(r)?0:r;var a=this.layout.size;o-=i?a.paddingLeft:a.paddingRight,r-=n?a.paddingTop:a.paddingBottom,this.position.x=o,this.position.y=r},a.prototype.layoutPosition=function(){var e=this.layout.size,t=this.layout.options,i={},n=t.isOriginLeft?"paddingLeft":"paddingRight",o=t.isOriginLeft?"left":"right",r=t.isOriginLeft?"right":"left",a=this.position.x+e[n];a=t.percentPosition&&!t.isHorizontal?a/e.width*100+"%":a+"px",i[o]=a,i[r]="";var s=t.isOriginTop?"paddingTop":"paddingBottom",l=t.isOriginTop?"top":"bottom",d=t.isOriginTop?"bottom":"top",u=this.position.y+e[s];u=t.percentPosition&&t.isHorizontal?u/e.height*100+"%":u+"px",i[l]=u,i[d]="",this.css(i),this.emitEvent("layout",[this])};var m=h?function(e,t){return"translate3d("+e+"px, "+t+"px, 0)"}:function(e,t){return"translate("+e+"px, "+t+"px)"};a.prototype._transitionTo=function(e,t){this.getPosition();var i=this.position.x,n=this.position.y,o=parseInt(e,10),r=parseInt(t,10),a=o===this.position.x&&r===this.position.y;if(this.setPosition(e,t),!a||this.isTransitioning){var s=e-i,l=t-n,d={},u=this.layout.options;s=u.isOriginLeft?s:-s,l=u.isOriginTop?l:-l,d.transform=m(s,l),this.transition({to:d,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},a.prototype.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},a.prototype.moveTo=c?a.prototype._transitionTo:a.prototype.goTo,a.prototype.setPosition=function(e,t){this.position.x=parseInt(e,10),this.position.y=parseInt(t,10)},a.prototype._nonTransition=function(e){for(var t in this.css(e.to),e.isCleaning&&this._removeStyles(e.to),e.onTransitionEnd)e.onTransitionEnd[t].call(this)},a.prototype._transition=function(e){if(parseFloat(this.layout.options.transitionDuration)){var t=this._transn;for(var i in e.onTransitionEnd)t.onEnd[i]=e.onTransitionEnd[i];for(i in e.to)t.ingProperties[i]=!0,e.isCleaning&&(t.clean[i]=!0);if(e.from){this.css(e.from);this.element.offsetHeight;null}this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0}else this._nonTransition(e)};var g=u&&n.toDashed(u)+",opacity";a.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:g,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(_,this,!1))},a.prototype.transition=a.prototype[d?"_transition":"_nonTransition"],a.prototype.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},a.prototype.onotransitionend=function(e){this.ontransitionend(e)};var v={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};a.prototype.ontransitionend=function(e){if(e.target===this.element){var t=this._transn,i=v[e.propertyName]||e.propertyName;if(delete t.ingProperties[i],o(t.ingProperties)&&this.disableTransition(),i in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[i]),i in t.onEnd)t.onEnd[i].call(this),delete t.onEnd[i];this.emitEvent("transitionEnd",[this])}},a.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(_,this,!1),this.isTransitioning=!1},a.prototype._removeStyles=function(e){var t={};for(var i in e)t[i]="";this.css(t)};var y={transitionProperty:"",transitionDuration:""};return a.prototype.removeTransitionStyles=function(){this.css(y)},a.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},a.prototype.remove=function(){if(d&&parseFloat(this.layout.options.transitionDuration)){var e=this;this.once("transitionEnd",function(){e.removeElem()}),this.hide()}else this.removeElem()},a.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options,t={};t[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0,onTransitionEnd:t})},a.prototype.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},a.prototype.getHideRevealTransitionEndProperty=function(e){var t=this.layout.options[e];if(t.opacity)return"opacity";for(var i in t)return i},a.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options,t={};t[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},a.prototype.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},a.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},a}),
/*!
     * Outlayer v1.4.0
     * the brains and guts of a layout library
     * MIT license
     */
function(r,a){"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","eventEmitter/EventEmitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(e,t,i,n,o){return a(r,e,t,i,n,o)}):"object"==typeof exports?module.exports=a(r,require("eventie"),require("wolfy87-eventemitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):r.Outlayer=a(r,r.eventie,r.EventEmitter,r.getSize,r.fizzyUIUtils,r.Outlayer.Item)}(window,function factory(e,t,i,o,a,r){function s(e,t){var i=a.getQueryElement(e);if(i){this.element=i,d&&(this.$element=d(this.element)),this.options=a.extend({},this.constructor.defaults),this.option(t);var n=++u;this.element.outlayerGUID=n,(c[n]=this)._create(),this.options.isInitLayout&&this.layout()}else l&&l.error("Bad element for "+this.constructor.namespace+": "+(i||e))}var l=e.console,d=e.jQuery,n=function(){},u=0,c={};return s.namespace="outlayer",s.Item=r,s.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},a.extend(s.prototype,i.prototype),s.prototype.option=function(e){a.extend(this.options,e)},s.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),a.extend(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},s.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},s.prototype._itemize=function(e){for(var t=this._filterFindItemElements(e),i=this.constructor.Item,n=[],o=0,r=t.length;o<r;o++){var a=new i(t[o],this);n.push(a)}return n},s.prototype._filterFindItemElements=function(e){return a.filterFindElements(e,this.options.itemSelector)},s.prototype.getItemElements=function(){for(var e=[],t=0,i=this.items.length;t<i;t++)e.push(this.items[t].element);return e},s.prototype.layout=function(){this._resetLayout(),this._manageStamps();var e=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},s.prototype._init=s.prototype.layout,s.prototype._resetLayout=function(){this.getSize()},s.prototype.getSize=function(){this.size=o(this.element)},s.prototype._getMeasurement=function(e,t){var i,n=this.options[e];this[e]=n?("string"==typeof n?i=this.element.querySelector(n):a.isElement(n)&&(i=n),i?o(i)[t]:n):0},s.prototype.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},s.prototype._getItemsForLayout=function(e){for(var t=[],i=0,n=e.length;i<n;i++){var o=e[i];o.isIgnored||t.push(o)}return t},s.prototype._layoutItems=function(e,t){if(this._emitCompleteOnItems("layout",e),e&&e.length){for(var i=[],n=0,o=e.length;n<o;n++){var r=e[n],a=this._getItemLayoutPosition(r);a.item=r,a.isInstant=t||r.isLayoutInstant,i.push(a)}this._processLayoutQueue(i)}},s.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},s.prototype._processLayoutQueue=function(e){for(var t=0,i=e.length;t<i;t++){var n=e[t];this._positionItem(n.item,n.x,n.y,n.isInstant)}},s.prototype._positionItem=function(e,t,i,n){n?e.goTo(t,i):e.moveTo(t,i)},s.prototype._postLayout=function(){this.resizeContainer()},s.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},s.prototype._getContainerSize=n,s.prototype._setContainerMeasure=function(e,t){if(e!==undefined){var i=this.size;i.isBorderBox&&(e+=t?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"}},s.prototype._emitCompleteOnItems=function(e,t){function i(){o.emitEvent(e+"Complete",[t])}function n(){++a===r&&i()}var o=this,r=t.length;if(t&&r)for(var a=0,s=0,l=t.length;s<l;s++){t[s].once(e,n)}else i()},s.prototype.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},s.prototype.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},s.prototype.stamp=function(e){if(e=this._find(e)){this.stamps=this.stamps.concat(e);for(var t=0,i=e.length;t<i;t++){var n=e[t];this.ignore(n)}}},s.prototype.unstamp=function(e){if(e=this._find(e))for(var t=0,i=e.length;t<i;t++){var n=e[t];a.removeFrom(this.stamps,n),this.unignore(n)}},s.prototype._find=function(e){if(e)return"string"==typeof e&&(e=this.element.querySelectorAll(e)),e=a.makeArray(e)},s.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var e=0,t=this.stamps.length;e<t;e++){var i=this.stamps[e];this._manageStamp(i)}}},s.prototype._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},s.prototype._manageStamp=n,s.prototype._getElementOffset=function(e){var t=e.getBoundingClientRect(),i=this._boundingRect,n=o(e);return{left:t.left-i.left-n.marginLeft,top:t.top-i.top-n.marginTop,right:i.right-t.right-n.marginRight,bottom:i.bottom-t.bottom-n.marginBottom}},s.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},s.prototype.bindResize=function(){this.isResizeBound||(t.bind(e,"resize",this),this.isResizeBound=!0)},s.prototype.unbindResize=function(){this.isResizeBound&&t.unbind(e,"resize",this),this.isResizeBound=!1},s.prototype.onresize=function(){function e(){t.resize(),delete t.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var t=this;this.resizeTimeout=setTimeout(e,100)},s.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},s.prototype.needsResizeLayout=function(){var e=o(this.element);return this.size&&e&&e.innerWidth!==this.size.innerWidth},s.prototype.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},s.prototype.appended=function(e){var t=this.addItems(e);t.length&&(this.layoutItems(t,!0),this.reveal(t))},s.prototype.prepended=function(e){var t=this._itemize(e);if(t.length){var i=this.items.slice(0);this.items=t.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(i)}},s.prototype.reveal=function(e){this._emitCompleteOnItems("reveal",e);for(var t=e&&e.length,i=0;t&&i<t;i++){e[i].reveal()}},s.prototype.hide=function(e){this._emitCompleteOnItems("hide",e);for(var t=e&&e.length,i=0;t&&i<t;i++){e[i].hide()}},s.prototype.revealItemElements=function(e){var t=this.getItems(e);this.reveal(t)},s.prototype.hideItemElements=function(e){var t=this.getItems(e);this.hide(t)},s.prototype.getItem=function(e){for(var t=0,i=this.items.length;t<i;t++){var n=this.items[t];if(n.element===e)return n}},s.prototype.getItems=function(e){for(var t=[],i=0,n=(e=a.makeArray(e)).length;i<n;i++){var o=e[i],r=this.getItem(o);r&&t.push(r)}return t},s.prototype.remove=function(e){var t=this.getItems(e);if(this._emitCompleteOnItems("remove",t),t&&t.length)for(var i=0,n=t.length;i<n;i++){var o=t[i];o.remove(),a.removeFrom(this.items,o)}},s.prototype.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="";for(var t=0,i=this.items.length;t<i;t++){this.items[t].destroy()}this.unbindResize();var n=this.element.outlayerGUID;delete c[n],delete this.element.outlayerGUID,d&&d.removeData(this.element,this.constructor.namespace)},s.data=function(e){var t=(e=a.getQueryElement(e))&&e.outlayerGUID;return t&&c[t]},s.create=function(e,t){function i(){s.apply(this,arguments)}return Object.create?i.prototype=Object.create(s.prototype):a.extend(i.prototype,s.prototype),(i.prototype.constructor=i).defaults=a.extend({},s.defaults),a.extend(i.defaults,t),i.prototype.settings={},i.namespace=e,i.data=s.data,i.Item=function n(){r.apply(this,arguments)},i.Item.prototype=new r,a.htmlInit(i,e),d&&d.bridget&&d.bridget(e,i),i},s.Item=r,s}),
/*!
     * Masonry v3.3.0
     * Cascading grid layout library
     * http://masonry.desandro.com
     * MIT License
     * by David DeSandro
     */
function(e,t){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","fizzy-ui-utils/utils"],t):"object"==typeof exports?module.exports=t(require("outlayer"),require("get-size"),require("fizzy-ui-utils")):e.Masonry=t(e.Outlayer,e.getSize,e.fizzyUIUtils)}(window,function factory(e,d,u){var t=e.create("masonry");return t.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var e=this.cols;for(this.colYs=[];e--;)this.colYs.push(0);this.maxY=0},t.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var e=this.items[0],t=e&&e.element;this.columnWidth=t&&d(t).outerWidth||this.containerWidth}var i=this.columnWidth+=this.gutter,n=this.containerWidth+this.gutter,o=n/i,r=i-n%i;o=Math[r&&r<1?"round":"floor"](o),this.cols=Math.max(o,1)},t.prototype.getContainerWidth=function(){var e=this.options.isFitWidth?this.element.parentNode:this.element,t=d(e);this.containerWidth=t&&t.innerWidth},t.prototype._getItemLayoutPosition=function(e){e.getSize();var t=e.size.outerWidth%this.columnWidth,i=Math[t&&t<1?"round":"ceil"](e.size.outerWidth/this.columnWidth);i=Math.min(i,this.cols);for(var n=this._getColGroup(i),o=Math.min.apply(Math,n),r=u.indexOf(n,o),a={x:this.columnWidth*r,y:o},s=o+e.size.outerHeight,l=this.cols+1-n.length,d=0;d<l;d++)this.colYs[r+d]=s;return a},t.prototype._getColGroup=function(e){if(e<2)return this.colYs;for(var t=[],i=this.cols+1-e,n=0;n<i;n++){var o=this.colYs.slice(n,n+e);t[n]=Math.max.apply(Math,o)}return t},t.prototype._manageStamp=function(e){var t=d(e),i=this._getElementOffset(e),n=this.options.isOriginLeft?i.left:i.right,o=n+t.outerWidth,r=Math.floor(n/this.columnWidth);r=Math.max(0,r);var a=Math.floor(o/this.columnWidth);a-=o%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var s=(this.options.isOriginTop?i.top:i.bottom)+t.outerHeight,l=r;l<=a;l++)this.colYs[l]=Math.max(s,this.colYs[l])},t.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this.options.isFitWidth&&(e.width=this._getContainerFitWidth()),e},t.prototype._getContainerFitWidth=function(){for(var e=0,t=this.cols;--t&&0===this.colYs[t];)e++;return(this.cols-e)*this.columnWidth-this.gutter},t.prototype.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!==this.containerWidth},t}));var toggleState=!1;$(document).ready(function(){slideoutEl=$("#nav_slide-out"),$("#toggle_slideout, #toggle_slideout-label").on("click",function(){toggleSlideOut()}),$("div.nav_bottom-menu-items a.nav_bottom-item, div.nav_slide-out-items a.nav_slide-out-item").each(function(e,t){0===window.location.href.indexOf($(t).attr("href"))&&$(t).addClass("active")}),click_close()});